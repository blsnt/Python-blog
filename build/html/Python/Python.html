

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. 第一章 计算机基础 &mdash; BLSNT BLOG 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Linux基础" href="../Linux/index.html" />
    <link rel="prev" title="Python编程" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BLSNT BLOG
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python编程</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">1. 第一章 计算机基础</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">1.1. 硬件基础</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">1.2. 操作系统</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">1.3. 解释器或编译器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">1.4. 软件(应用程序)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">1.5. 进制</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python">2. 第二章 Python入门</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">2.1. 环境的安装</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">2.2. 编码</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">编码基础</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">python编码相关</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id11">2.3. 变量</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">为什么要有变量？</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">变量命名规范</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pycharm">2.4. pycharm 自动生成头部代码</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python23">2.5. python2和3区别</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">2.6. 条件判断</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#if">if 判断</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id15">2.7. 循环</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#while">while 循环</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for">for 循环</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id16">2.8. 注释</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">2.9. 字符串格式化</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id18">3. 第三章 数据类型</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#int">3.1. 整形(int)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">整形的长度</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">整除</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#bool">3.2. 布尔(bool)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#str">3.3. 字符串(str)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id21">字符串的私有方法</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id22">3.4. 列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">3.5. 元祖</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">3.6. 字典</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id25">3.7. 集合</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">3.8. 内存相关(小数据池)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is">3.9. ==和is区别？</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id27">3.10. 运算符</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id28">算数运算</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id29">比较运算</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id30">赋值运算</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id31">逻辑运算</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#in-not-in">3.11. in &amp; not in</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id32">3.12. 深浅拷贝</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id33">4. 第四章 文件操作</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id34">4.1. 文件基本操作</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id35">4.2. 打开模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36">4.3. 操作</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">4.4. 关闭文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id38">4.5. 文件修改</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id39">5. 第五章 函数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id40">5.1. 三元运算</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id41">5.2. 函数的基本结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">5.3. 函数的参数</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id43">形参</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id45">实参</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id49">5.4. 函数的返回值</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id50">5.5. 作用域</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#global">global</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nonlocal">nonlocal</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id51">5.6. 函数嵌套</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id52">5.7. 函数小高级</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id53">函数可以当做变量来使用</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id54">函数可以当做参数进行传递</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lambda">5.8. lambda 表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id55">5.9. 内置函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id56">5.10. 函数中高级</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id57">函数当返回值</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id58">闭包</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id59">5.11. 装饰器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id60">装饰器基本格式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id61">关于于参数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id62">关于返回值</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id63">装饰器推荐写法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id64">关于前后</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id65">带参数的装饰器</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id66">5.12. 推导式</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id67">列表推导式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id68">集合推导式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id69">5.11.3 字典推导式</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id70">6. 第六章 模块</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id71">6.1. 模块基本知识</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id72">导入模块方式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#base-dir">配置BASE_DIR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id73">项目常用目录</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id74">模块实现单例模式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id75">重新加载模块</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id76">模块的多次导入</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id77">模块导入的执行过程</a></li>
<li class="toctree-l4"><a class="reference internal" href="#py">py文件的两种执行方式</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id78">6.2. 常用内置模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id79">6.3. 异常处理</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id80">6.4. 第三方模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id81">6.5. 主文件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id82">7. 第七章 面向对象</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id83">7.1. 迭代器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id84">7.2. 生成器（函数的变异）</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id85">7.3. 面向对象基本格式</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id86">7.4. 类成员</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id87">实列变量（属于对象成员）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id88">类变量</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id89">7.5. 方法</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id90">绑定方法/普通方法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id91">静态方法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id92">类方法</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id93">7.6. 嵌套</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id94">7.7. 特殊成员</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#init"><code class="docutils literal notranslate"><span class="pre">__init__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#new"><code class="docutils literal notranslate"><span class="pre">__new__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cal"><code class="docutils literal notranslate"><span class="pre">__cal__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#getitem-setitem-delitem"><code class="docutils literal notranslate"><span class="pre">__getitem__</span>&#160;&#160; <span class="pre">__setitem__</span> <span class="pre">__delitem__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id95"><code class="docutils literal notranslate"><span class="pre">__str__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#dict"><code class="docutils literal notranslate"><span class="pre">__dict__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id96">上下文管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id97">对象相加</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id98">7.8. 内置函数补充</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id99">7.9. 可迭代对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id100">7.10. 约束</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id101">7.11. 反射</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id102">7.12. 单例模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id103">7.13. 文件的连接池</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id104">7.14. 反射当前文件的变量</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id105">8. 第八章 网络编程</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id106">9. 第九章 并发编程</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id107">10. 第十章 数据库</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sql">10.1. 初识sql语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mysql">10.2. MySQL的表的操作</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id108">10.2.1 表的约束</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id109">修改表</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id110">10.3. 单表查询</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#where">where约束</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id111">比较运算 &gt; &lt; = &gt;= &lt;= !=</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id113">范围筛选</a></li>
<li class="toctree-l4"><a class="reference internal" href="#group-by">分组 group by</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id114">聚合</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id115">分组聚合</a></li>
<li class="toctree-l4"><a class="reference internal" href="#having">having</a></li>
<li class="toctree-l4"><a class="reference internal" href="#order-by">order by</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limit">limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymysql">pymysql操作数据库</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id116">10.4. 多表查询</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id117">连表查询</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id118">子查询</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id119">11. 第十一章 前端开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="#django">12. 第十二章 Django框架</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id120">13. 第十三章 爬虫</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cmdb">14. 第十四章 CMDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id121">15. 附录 常见错误和单词</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Linux/index.html">Linux基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ELK/index.html">ELK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ansible/index.html">Ansible</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BLSNT BLOG</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Python编程</a> &raquo;</li>
        
      <li><span class="section-number">1. </span>第一章 计算机基础</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Python/Python.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#id1" id="id122">第一章 计算机基础</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id123">硬件基础</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id124">操作系统</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id125">解释器或编译器</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id126">软件(应用程序)</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id127">进制</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python" id="id128">第二章 Python入门</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id129">环境的安装</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id130">编码</a></p>
<ul>
<li><p><a class="reference internal" href="#id9" id="id131">编码基础</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id132">python编码相关</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id11" id="id133">变量</a></p>
<ul>
<li><p><a class="reference internal" href="#id12" id="id134">为什么要有变量？</a></p></li>
<li><p><a class="reference internal" href="#id13" id="id135">变量命名规范</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pycharm" id="id136">pycharm 自动生成头部代码</a></p></li>
<li><p><a class="reference internal" href="#python23" id="id137">python2和3区别</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id138">条件判断</a></p>
<ul>
<li><p><a class="reference internal" href="#if" id="id139">if 判断</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id15" id="id140">循环</a></p>
<ul>
<li><p><a class="reference internal" href="#while" id="id141">while 循环</a></p></li>
<li><p><a class="reference internal" href="#for" id="id142">for 循环</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id16" id="id143">注释</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id144">字符串格式化</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id18" id="id145">第三章 数据类型</a></p>
<ul>
<li><p><a class="reference internal" href="#int" id="id146">整形(int)</a></p>
<ul>
<li><p><a class="reference internal" href="#id19" id="id147">整形的长度</a></p></li>
<li><p><a class="reference internal" href="#id20" id="id148">整除</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bool" id="id149">布尔(bool)</a></p></li>
<li><p><a class="reference internal" href="#str" id="id150">字符串(str)</a></p>
<ul>
<li><p><a class="reference internal" href="#id21" id="id151">字符串的私有方法</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id22" id="id152">列表</a></p></li>
<li><p><a class="reference internal" href="#id23" id="id153">元祖</a></p></li>
<li><p><a class="reference internal" href="#id24" id="id154">字典</a></p></li>
<li><p><a class="reference internal" href="#id25" id="id155">集合</a></p></li>
<li><p><a class="reference internal" href="#id26" id="id156">内存相关(小数据池)</a></p></li>
<li><p><a class="reference internal" href="#is" id="id157">==和is区别？</a></p></li>
<li><p><a class="reference internal" href="#id27" id="id158">运算符</a></p>
<ul>
<li><p><a class="reference internal" href="#id28" id="id159">算数运算</a></p></li>
<li><p><a class="reference internal" href="#id29" id="id160">比较运算</a></p></li>
<li><p><a class="reference internal" href="#id30" id="id161">赋值运算</a></p></li>
<li><p><a class="reference internal" href="#id31" id="id162">逻辑运算</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#in-not-in" id="id163">in &amp; not in</a></p></li>
<li><p><a class="reference internal" href="#id32" id="id164">深浅拷贝</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id33" id="id165">第四章 文件操作</a></p>
<ul>
<li><p><a class="reference internal" href="#id34" id="id166">文件基本操作</a></p></li>
<li><p><a class="reference internal" href="#id35" id="id167">打开模式</a></p></li>
<li><p><a class="reference internal" href="#id36" id="id168">操作</a></p></li>
<li><p><a class="reference internal" href="#id37" id="id169">关闭文件</a></p></li>
<li><p><a class="reference internal" href="#id38" id="id170">文件修改</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id39" id="id171">第五章 函数</a></p>
<ul>
<li><p><a class="reference internal" href="#id40" id="id172">三元运算</a></p></li>
<li><p><a class="reference internal" href="#id41" id="id173">函数的基本结构</a></p></li>
<li><p><a class="reference internal" href="#id42" id="id174">函数的参数</a></p>
<ul>
<li><p><a class="reference internal" href="#id43" id="id175">形参</a></p></li>
<li><p><a class="reference internal" href="#id45" id="id176">实参</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id49" id="id177">函数的返回值</a></p></li>
<li><p><a class="reference internal" href="#id50" id="id178">作用域</a></p>
<ul>
<li><p><a class="reference internal" href="#global" id="id179">global</a></p></li>
<li><p><a class="reference internal" href="#nonlocal" id="id180">nonlocal</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id51" id="id181">函数嵌套</a></p></li>
<li><p><a class="reference internal" href="#id52" id="id182">函数小高级</a></p>
<ul>
<li><p><a class="reference internal" href="#id53" id="id183">函数可以当做变量来使用</a></p></li>
<li><p><a class="reference internal" href="#id54" id="id184">函数可以当做参数进行传递</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#lambda" id="id185">lambda 表达式</a></p></li>
<li><p><a class="reference internal" href="#id55" id="id186">内置函数</a></p></li>
<li><p><a class="reference internal" href="#id56" id="id187">函数中高级</a></p>
<ul>
<li><p><a class="reference internal" href="#id57" id="id188">函数当返回值</a></p></li>
<li><p><a class="reference internal" href="#id58" id="id189">闭包</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id59" id="id190">装饰器</a></p>
<ul>
<li><p><a class="reference internal" href="#id60" id="id191">装饰器基本格式</a></p></li>
<li><p><a class="reference internal" href="#id61" id="id192">关于于参数</a></p></li>
<li><p><a class="reference internal" href="#id62" id="id193">关于返回值</a></p></li>
<li><p><a class="reference internal" href="#id63" id="id194">装饰器推荐写法</a></p></li>
<li><p><a class="reference internal" href="#id64" id="id195">关于前后</a></p></li>
<li><p><a class="reference internal" href="#id65" id="id196">带参数的装饰器</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id66" id="id197">推导式</a></p>
<ul>
<li><p><a class="reference internal" href="#id67" id="id198">列表推导式</a></p></li>
<li><p><a class="reference internal" href="#id68" id="id199">集合推导式</a></p></li>
<li><p><a class="reference internal" href="#id69" id="id200">5.11.3 字典推导式</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#id70" id="id201">第六章 模块</a></p>
<ul>
<li><p><a class="reference internal" href="#id71" id="id202">模块基本知识</a></p>
<ul>
<li><p><a class="reference internal" href="#id72" id="id203">导入模块方式</a></p></li>
<li><p><a class="reference internal" href="#base-dir" id="id204">配置BASE_DIR</a></p></li>
<li><p><a class="reference internal" href="#id73" id="id205">项目常用目录</a></p></li>
<li><p><a class="reference internal" href="#id74" id="id206">模块实现单例模式</a></p></li>
<li><p><a class="reference internal" href="#id75" id="id207">重新加载模块</a></p></li>
<li><p><a class="reference internal" href="#id76" id="id208">模块的多次导入</a></p></li>
<li><p><a class="reference internal" href="#id77" id="id209">模块导入的执行过程</a></p></li>
<li><p><a class="reference internal" href="#py" id="id210">py文件的两种执行方式</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id78" id="id211">常用内置模块</a></p></li>
<li><p><a class="reference internal" href="#id79" id="id212">异常处理</a></p></li>
<li><p><a class="reference internal" href="#id80" id="id213">第三方模块</a></p></li>
<li><p><a class="reference internal" href="#id81" id="id214">主文件</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id82" id="id215">第七章 面向对象</a></p>
<ul>
<li><p><a class="reference internal" href="#id83" id="id216">迭代器</a></p></li>
<li><p><a class="reference internal" href="#id84" id="id217">生成器（函数的变异）</a></p></li>
<li><p><a class="reference internal" href="#id85" id="id218">面向对象基本格式</a></p></li>
<li><p><a class="reference internal" href="#id86" id="id219">类成员</a></p>
<ul>
<li><p><a class="reference internal" href="#id87" id="id220">实列变量（属于对象成员）</a></p></li>
<li><p><a class="reference internal" href="#id88" id="id221">类变量</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id89" id="id222">方法</a></p>
<ul>
<li><p><a class="reference internal" href="#id90" id="id223">绑定方法/普通方法</a></p></li>
<li><p><a class="reference internal" href="#id91" id="id224">静态方法</a></p></li>
<li><p><a class="reference internal" href="#id92" id="id225">类方法</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id93" id="id226">嵌套</a></p></li>
<li><p><a class="reference internal" href="#id94" id="id227">特殊成员</a></p>
<ul>
<li><p><a class="reference internal" href="#init" id="id228"><code class="docutils literal notranslate"><span class="pre">__init__</span></code></a></p></li>
<li><p><a class="reference internal" href="#new" id="id229"><code class="docutils literal notranslate"><span class="pre">__new__</span></code></a></p></li>
<li><p><a class="reference internal" href="#cal" id="id230"><code class="docutils literal notranslate"><span class="pre">__cal__</span></code></a></p></li>
<li><p><a class="reference internal" href="#getitem-setitem-delitem" id="id231"><code class="docutils literal notranslate"><span class="pre">__getitem__</span>&#160;&#160; <span class="pre">__setitem__</span> <span class="pre">__delitem__</span></code></a></p></li>
<li><p><a class="reference internal" href="#id95" id="id232"><code class="docutils literal notranslate"><span class="pre">__str__</span></code></a></p></li>
<li><p><a class="reference internal" href="#dict" id="id233"><code class="docutils literal notranslate"><span class="pre">__dict__</span></code></a></p></li>
<li><p><a class="reference internal" href="#id96" id="id234">上下文管理</a></p></li>
<li><p><a class="reference internal" href="#id97" id="id235">对象相加</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id98" id="id236">内置函数补充</a></p></li>
<li><p><a class="reference internal" href="#id99" id="id237">可迭代对象</a></p></li>
<li><p><a class="reference internal" href="#id100" id="id238">约束</a></p></li>
<li><p><a class="reference internal" href="#id101" id="id239">反射</a></p></li>
<li><p><a class="reference internal" href="#id102" id="id240">单例模式</a></p></li>
<li><p><a class="reference internal" href="#id103" id="id241">文件的连接池</a></p></li>
<li><p><a class="reference internal" href="#id104" id="id242">反射当前文件的变量</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id105" id="id243">第八章 网络编程</a></p></li>
<li><p><a class="reference internal" href="#id106" id="id244">第九章 并发编程</a></p></li>
<li><p><a class="reference internal" href="#id107" id="id245">第十章 数据库</a></p>
<ul>
<li><p><a class="reference internal" href="#sql" id="id246">初识sql语句</a></p></li>
<li><p><a class="reference internal" href="#mysql" id="id247">MySQL的表的操作</a></p>
<ul>
<li><p><a class="reference internal" href="#id108" id="id248">10.2.1 表的约束</a></p></li>
<li><p><a class="reference internal" href="#id109" id="id249">修改表</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id110" id="id250">单表查询</a></p>
<ul>
<li><p><a class="reference internal" href="#where" id="id251">where约束</a></p></li>
<li><p><a class="reference internal" href="#id111" id="id252">比较运算 &gt; &lt; = &gt;= &lt;= !=</a></p></li>
<li><p><a class="reference internal" href="#id113" id="id253">范围筛选</a></p></li>
<li><p><a class="reference internal" href="#group-by" id="id254">分组 group by</a></p></li>
<li><p><a class="reference internal" href="#id114" id="id255">聚合</a></p></li>
<li><p><a class="reference internal" href="#id115" id="id256">分组聚合</a></p></li>
<li><p><a class="reference internal" href="#having" id="id257">having</a></p></li>
<li><p><a class="reference internal" href="#order-by" id="id258">order by</a></p></li>
<li><p><a class="reference internal" href="#limit" id="id259">limit</a></p></li>
<li><p><a class="reference internal" href="#pymysql" id="id260">pymysql操作数据库</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id116" id="id261">多表查询</a></p>
<ul>
<li><p><a class="reference internal" href="#id117" id="id262">连表查询</a></p></li>
<li><p><a class="reference internal" href="#id118" id="id263">子查询</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#id119" id="id264">第十一章 前端开发</a></p></li>
<li><p><a class="reference internal" href="#django" id="id265">第十二章 Django框架</a></p></li>
<li><p><a class="reference internal" href="#id120" id="id266">第十三章 爬虫</a></p></li>
<li><p><a class="reference internal" href="#cmdb" id="id267">第十四章 CMDB</a></p></li>
<li><p><a class="reference internal" href="#id121" id="id268">附录 常见错误和单词</a></p></li>
</ul>
</div>
<div class="section" id="id1">
<h1><a class="toc-backref" href="#id122"><span class="section-number">1. </span>第一章 计算机基础</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id123"><span class="section-number">1.1. </span>硬件基础</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>计算机基本的硬件有：CPU，内存，显卡，主板，电源，键盘，鼠标，网卡等组成，只有硬件但硬件之间无法进行交流和通信。</p>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id124"><span class="section-number">1.2. </span>操作系统</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>操作系统用于协调和控制硬件之间进行工作，常见的操作系统有哪些</p>
<ul class="simple">
<li><p>windows</p></li>
<li><p>linux</p>
<ul>
<li><p>centos</p></li>
<li><p>redhat</p></li>
</ul>
</li>
<li><p>mac</p></li>
</ul>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id125"><span class="section-number">1.3. </span>解释器或编译器</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>编程语言的开发者编写的一个工具，将用户写的代码转换成010101交给操作系统去执行</p>
<blockquote>
<div><p>解释和编译型语言</p>
</div></blockquote>
<hr class="docutils" />
<p>解释型语言就类似于：实时翻译，代表：Python/PHP/Ruby/Perl</p>
<p>编译型语言类似于：说完之后，整体再进行翻译，代表：C/C++/Java/Go</p>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id126"><span class="section-number">1.4. </span>软件(应用程序)</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>软件又称为应用程序，就是我们在电脑上使用的工具，类似于：记事本/图片查看/游戏</p>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id127"><span class="section-number">1.5. </span>进制</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>对于计算机而言无论是文件存储/网络传输输入本质都是：二进制，如：电脑上存储视频/图片/文件，都是二进制</p>
<p>进制：</p>
<ul class="simple">
<li><p>二进制，计算机内部</p></li>
<li><p>8进制</p></li>
<li><p>10进制，人来进行使用一般情况下计算机可以获取10进制，然后再内部会自动转换成二进制并操作</p></li>
<li><p>16进制，一般应用于表示二进制(用更短的内容表示更多的数据)</p></li>
</ul>
</div>
</div>
<div class="section" id="python">
<h1><a class="toc-backref" href="#id128"><span class="section-number">2. </span>第二章 Python入门</a><a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id7">
<h2><a class="toc-backref" href="#id129"><span class="section-number">2.1. </span>环境的安装</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>解释器：py2/py3 (环境变量)</p></li>
<li><p>开发工具：pycharm</p></li>
</ul>
</div>
<div class="section" id="id8">
<h2><a class="toc-backref" href="#id130"><span class="section-number">2.2. </span>编码</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id131">编码基础</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>unicode 万国码 32位 4字节 所有的都能表示出来还有剩余</p></li>
<li><p>ascii 8位4字节 只能表示英文字母 数字下划线</p></li>
<li><p>utf-8 万国码的压缩版 从左到右每8位为0就舍去 汉字占3字节</p></li>
<li><p>gbk 汉字占2字符</p></li>
<li><p>gb2312</p></li>
</ul>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id132">python编码相关</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>对于python默认解释器编码</p>
<ul>
<li><p>py2默认ascii编码，在文件头部加</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>
</pre></div>
</div>
</li>
<li><p>py3默认utf-8编码</p></li>
</ul>
<blockquote>
<div><p>注意: 对于操作文件时，要按照：以什么编写写入，就要用什么编码打开</p>
</div></blockquote>
</div>
</div>
<div class="section" id="id11">
<h2><a class="toc-backref" href="#id133"><span class="section-number">2.3. </span>变量</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id134">为什么要有变量？</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>为某个值创建一个外号，以后再使用的时候通过此外号就可以直接调用</p>
</div>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id135">变量命名规范</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>变量名只能包含：字母数字下划线</p></li>
<li><p>数字不能开头</p></li>
<li><p>不能是python关键字</p></li>
<li><p>见名知意</p></li>
</ul>
</div>
</div>
<div class="section" id="pycharm">
<h2><a class="toc-backref" href="#id136"><span class="section-number">2.4. </span>pycharm 自动生成头部代码</a><a class="headerlink" href="#pycharm" title="Permalink to this headline">¶</a></h2>
<p><img alt="image0" src="http://images.dregs.top/images/20200302221200.png" /></p>
<p><img alt="image1" src="http://images.dregs.top/images/20200302221241.png" /></p>
</div>
<div class="section" id="python23">
<h2><a class="toc-backref" href="#id137"><span class="section-number">2.5. </span>python2和3区别</a><a class="headerlink" href="#python23" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>py2默认解释器编码格式 ascii 修改头文件加</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding:utf-8 -*-</span>
</pre></div>
</div>
<ul class="simple">
<li><p>py3默认解释器编码格式 utf-8</p></li>
<li><p>py2输出 print加空格</p></li>
<li><p>py3输出print()</p></li>
<li><p>py2输入 raw_input()</p></li>
<li><p>py3输入 input()</p></li>
<li><p>字典的keys,items,values 拿到的数据类型都不一样</p>
<ul>
<li><p>py2：拿到的都是列表</p></li>
<li><p>py3：迭代器</p></li>
</ul>
</li>
<li><p>字符串类型不同</p>
<ul>
<li><p>py3 ：str bytes</p></li>
<li><p>py2 ：unicode str</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id14">
<h2><a class="toc-backref" href="#id138"><span class="section-number">2.6. </span>条件判断</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="if">
<h3><a class="toc-backref" href="#id139">if 判断</a><a class="headerlink" href="#if" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">表达式</span><span class="p">:</span>
     <span class="n">语句块</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">语句块</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 让用户输入一个数字，猜：如果数字 &gt; 50，则输出：大了，如果数字&lt;=50 ,则输出：小了</span>
<span class="n">num</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入数字&quot;</span><span class="p">)</span>
<span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="k">if</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;大了&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;小了&quot;</span><span class="p">)</span>

<span class="c1"># 用户名密码登录</span>
<span class="n">username</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入用户名：&quot;</span><span class="p">)</span>
<span class="n">password</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入密码：&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;alex&#39;</span> <span class="ow">and</span> <span class="n">password</span> <span class="o">==</span> <span class="mi">123</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;登录成功&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;用户名或者密码错误&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id15">
<h2><a class="toc-backref" href="#id140"><span class="section-number">2.7. </span>循环</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="while">
<h3><a class="toc-backref" href="#id141">while 循环</a><a class="headerlink" href="#while" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;人生苦短，我用python&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>break</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;人生苦短，我用python&quot;</span><span class="p">)</span>
  <span class="k">break</span>
</pre></div>
</div>
<p>continue</p>
<p>打印1234568910</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">continue</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>while else</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
  <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span> <span class="c1"># 不在满足while候的条件时触发，或者条件等于False</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;else代码块&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;结束&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="for">
<h3><a class="toc-backref" href="#id142">for 循环</a><a class="headerlink" href="#for" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>break</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
  <span class="k">break</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>continue</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
  <span class="k">continue</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>range</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># 打印1234568910</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">7</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id16">
<h2><a class="toc-backref" href="#id143"><span class="section-number">2.8. </span>注释</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 当行注释</span>
<span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span> <span class="c1"># 多行注释</span>
<span class="c1"># 快捷键 ctrl + / 选中多行注释</span>
</pre></div>
</div>
</div>
<div class="section" id="id17">
<h2><a class="toc-backref" href="#id144"><span class="section-number">2.9. </span>字符串格式化</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;我是</span><span class="si">%s</span><span class="s2">,年龄</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">,)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;我是</span><span class="si">%(n1)s</span><span class="s2">,年龄</span><span class="si">%(n2)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;n1&#39;</span><span class="p">:</span> <span class="s1">&#39;alex&#39;</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># v1 = &quot;我是{0},年龄{1}&quot;.format(&#39;alex&#39;,19)</span>
<span class="n">v1</span> <span class="o">=</span> <span class="s2">&quot;我是</span><span class="si">{0}</span><span class="s2">,年龄</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">,))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>

<span class="c1"># v2 = &quot;我是{name},年龄{age}&quot;.format(name=&#39;alex&#39;,age=18)</span>
<span class="n">v2</span> <span class="o">=</span> <span class="s2">&quot;我是</span><span class="si">{name}</span><span class="s2">,年龄</span><span class="si">{age}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">:</span><span class="mi">18</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id18">
<h1><a class="toc-backref" href="#id145"><span class="section-number">3. </span>第三章 数据类型</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h1>
<div class="section" id="int">
<h2><a class="toc-backref" href="#id146"><span class="section-number">3.1. </span>整形(int)</a><a class="headerlink" href="#int" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id19">
<h3><a class="toc-backref" href="#id147">整形的长度</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p>py2中有：int、long</p>
<p>py3中有：int</p>
</div>
<div class="section" id="id20">
<h3><a class="toc-backref" href="#id148">整除</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<p>注意：在python2中使用除法时，只能保留整数位，如果想要保留小数位，可以先导入一个模块。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="n">value</span> <span class="o">=</span> <span class="mi">3</span><span class="o">/</span><span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bool">
<h2><a class="toc-backref" href="#id149"><span class="section-number">3.2. </span>布尔(bool)</a><a class="headerlink" href="#bool" title="Permalink to this headline">¶</a></h2>
<p>布尔值就是用于表示真假，True和False</p>
<p>转换：</p>
<ul class="simple">
<li><p>数字转布尔：0是False，其他都是True</p></li>
<li><p>字符串转布尔：””是False，其他都是True</p></li>
</ul>
</div>
<div class="section" id="str">
<h2><a class="toc-backref" href="#id150"><span class="section-number">3.3. </span>字符串(str)</a><a class="headerlink" href="#str" title="Permalink to this headline">¶</a></h2>
<p>字符串是写代码中最常见的，python内存中的字符串是按照:unicode编码存储，对于字符串是不可变</p>
<div class="section" id="id21">
<h3><a class="toc-backref" href="#id151">字符串的私有方法</a><a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>upper() / lower() 大小写</p></li>
<li><p>isupper() 是否全部是大写</p></li>
<li><p>isdigit() 是否是数字</p></li>
<li><p>isnumeric() 推荐使用，判断是否是10进制的数</p></li>
<li><p>strip() /lstrip()/rstrip() ，去空白、</p></li>
<li><p>replace(‘被替换的字符’,‘要替换的内容’,可选次数)</p></li>
<li><p>split(‘根据什么东西分割’,‘分割次数’) / rsplit() 从右切割</p></li>
<li><p>startswith() 以什么开头</p></li>
<li><p>endswith() 以什么结尾</p></li>
<li><p>capitalize() 首字母变大写</p></li>
<li><p>find 找索引位置</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)</span> <span class="c1"># 存在则返回索引位置，不存在则返回-1</span>
</pre></div>
</div>
</li>
<li><p>center 居中</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>  <span class="c1"># ********alex********</span>
</pre></div>
</div>
</li>
<li><p>count 计算个数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>format 格式化</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;我叫:</span><span class="si">{0}</span><span class="s2">,年龄:</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;老男孩&#39;</span><span class="p">,</span><span class="mi">74</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>encode 编码</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;杨世义&#39;</span> <span class="c1"># 解释器读取到内存后，按照unicode编码存储，8个字节</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>join 拼接</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="n">v1</span> <span class="o">=</span> <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1"># a_l_e_x</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="id22">
<h2><a class="toc-backref" href="#id152"><span class="section-number">3.4. </span>列表</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;blsnt&#39;</span><span class="p">,</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="mi">99</span><span class="p">]</span>
</pre></div>
</div>
<ul>
<li><p>append 追加</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>insert 插入指定位置</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">name</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>remove 删除</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">name</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 1是元素名字</span>
</pre></div>
</div>
</li>
<li><p>pop</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">name</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 1是索引位置，不加索引默认删除最后一个</span>
</pre></div>
</div>
</li>
<li><p>del</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># 1是索引</span>
</pre></div>
</div>
</li>
<li><p>修改(字符串/数字/布尔除外)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;李烧起&#39;</span><span class="p">,</span><span class="s1">&#39;李思&#39;</span><span class="p">,</span><span class="s1">&#39;王五&#39;</span><span class="p">]</span>
<span class="n">user</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">66</span>
<span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;李杰&#39;</span>
</pre></div>
</div>
</li>
<li><p>列表嵌套</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="kc">True</span><span class="p">,[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">],[</span><span class="mi">1</span><span class="p">,[</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="s1">&#39;oldboy&#39;</span><span class="p">],</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>
</pre></div>
</div>
</li>
<li><p>extend</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">12</span><span class="p">]</span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;qwert&#39;</span>
<span class="n">li</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>reverse</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">v1</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>sort</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">v1</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># 从小到大（默认False）</span>
<span class="n">v1</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># 从大到小</span>
</pre></div>
</div>
</li>
</ul>
<p>反转案例</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;xadgasdgsdg&#39;</span>
<span class="n">name_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">name_len</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
  <span class="n">value</span> <span class="o">+=</span> <span class="n">name</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>注意：删除功能数字布尔字符串除外</p>
<p>字符串本身不能修改或删除【不可变类型】</p>
</div></blockquote>
<blockquote>
<div><p>列表是可变类型</p>
</div></blockquote>
</div>
<div class="section" id="id23">
<h2><a class="toc-backref" href="#id153"><span class="section-number">3.5. </span>元祖</a><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 元祖格式</span>
<span class="n">users</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">)</span>
</pre></div>
</div>
<p>公共功能</p>
<p>1.索引（排除：int/bool）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">users</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">)</span>
<span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>2.切片（排除：int/bool）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">users</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">)</span>
<span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>3.步长（排除：int/bool）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">users</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">)</span>
<span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>4.删除（排除：tuple/str/int/bool）</p>
<p>5.修改（排除：tuple/str/int/bool）</p>
<p>6.for循环（排除：int/bool）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">users</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>7.len（排除：int/bool）</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">users</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">))</span>
</pre></div>
</div>
<p>独有功能(无)</p>
</div>
<div class="section" id="id24">
<h2><a class="toc-backref" href="#id154"><span class="section-number">3.6. </span>字典</a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<p>帮助用户去表示一个事物的信息(事物是有多个属性)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;伟大&quot;</span><span class="p">,</span><span class="s2">&quot;age&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="s2">&quot;gender&quot;</span><span class="p">:</span><span class="s2">&quot;男&quot;</span><span class="p">}</span>
<span class="n">info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="c1"># 取值</span>
</pre></div>
</div>
<p>字典的独有功能</p>
<ul class="simple">
<li><p>keys</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;伟大&quot;</span><span class="p">,</span><span class="s2">&quot;age&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="s2">&quot;gender&quot;</span><span class="p">:</span><span class="s2">&quot;男&quot;</span><span class="p">}</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="c1"># 获取字典中的所有键</span>
</pre></div>
</div>
<ul class="simple">
<li><p>values</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;伟大&quot;</span><span class="p">,</span><span class="s2">&quot;age&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="s2">&quot;gender&quot;</span><span class="p">:</span><span class="s2">&quot;男&quot;</span><span class="p">}</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="c1"># 获取字典中的所有值</span>
</pre></div>
</div>
<ul class="simple">
<li><p>items</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;伟大&quot;</span><span class="p">,</span><span class="s2">&quot;age&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="s2">&quot;gender&quot;</span><span class="p">:</span><span class="s2">&quot;男&quot;</span><span class="p">}</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="c1"># 获取字典中的所有键值</span>
<span class="k">for</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>get</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>v = {&#39;user&#39;:&#39;blsnt&#39;,&#39;k2&#39;:&#39;v2&#39;}
print(v.get(&#39;k2&#39;，666))           # key存在返回值，如果不存在None，后面可以修改默认返回666
</pre></div>
</div>
<ul class="simple">
<li><p>pop</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span><span class="s1">&#39;blsnt&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">:</span><span class="s1">&#39;v2&#39;</span><span class="p">}</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>update</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span><span class="s1">&#39;blsnt&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">:</span><span class="s1">&#39;v2&#39;</span><span class="p">}</span>
<span class="n">v</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;k3&#39;</span><span class="p">:</span><span class="s1">&#39;v3&#39;</span><span class="p">,</span><span class="s1">&#39;k4&#39;</span><span class="p">:</span><span class="s1">&#39;v4&#39;</span><span class="p">})</span> <span class="c1"># 存在就覆盖，不存在就添加</span>
</pre></div>
</div>
<p>判断一个字符串中是否有敏感字符？</p>
<ul>
<li><p>str</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="s2">&quot;Python全栈21期&quot;</span>

<span class="k">if</span> <span class="s2">&quot;全栈&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;含敏感字符&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>list/tuple</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="s1">&#39;oldboy&#39;</span><span class="p">,</span><span class="s1">&#39;藏老四&#39;</span><span class="p">,</span><span class="s1">&#39;利奇航&#39;</span><span class="p">]</span>

<span class="k">if</span> <span class="s2">&quot;利奇航&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;含敏感&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>dict</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;k1&#39;</span><span class="p">:</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">:</span><span class="s1">&#39;v2&#39;</span><span class="p">,</span><span class="s1">&#39;k3&#39;</span><span class="p">:</span><span class="s1">&#39;v3&#39;</span><span class="p">}</span>

<span class="c1"># 默认按照键判断，即：判断x是否是字典的键。</span>
<span class="k">if</span> <span class="s1">&#39;x&#39;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># 请判断：k1 是否在其中？</span>
<span class="k">if</span> <span class="s1">&#39;k1&#39;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="c1"># 请判断：v2 是否在其中？</span>
<span class="c1"># 方式一：循环判断</span>
<span class="n">flag</span> <span class="o">=</span> <span class="s1">&#39;不存在&#39;</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s1">&#39;v2&#39;</span><span class="p">:</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="s1">&#39;存在&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>
<span class="c1"># 方式二：</span>
<span class="k">if</span> <span class="s1">&#39;v2&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span> <span class="c1"># 强制转换成列表 [&#39;v1&#39;,&#39;v2&#39;,&#39;v3&#39;]</span>
      <span class="k">pass</span>
<span class="c1"># 请判断：k2:v2 是否在其中？</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;k2&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;v2&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;存在&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;不存在&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>练习题</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 让用户输入任意字符串，然后判断此字符串是否包含指定的敏感字符。</span>

<span class="n">char_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;利奇航&#39;</span><span class="p">,</span><span class="s1">&#39;堂有光&#39;</span><span class="p">,</span><span class="s1">&#39;炸展会&#39;</span><span class="p">]</span>
<span class="n">content</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;请输入内容：&#39;</span><span class="p">)</span> <span class="c1"># 我叫利奇航  / 我是堂有光  / 我要炸展会</span>

<span class="n">success</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">char_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
        <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">break</span>

<span class="k">if</span> <span class="n">success</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;包含铭感字符&#39;</span><span class="p">)</span>

<span class="c1"># 示例：</span>
<span class="c1"># 1. 昨天课上最后一题</span>
<span class="c1"># 2. 判断 ‘v2’ 是否在字典的value中 v = {&#39;k1&#39;:&#39;v1&#39;,&#39;k2&#39;:&#39;v2&#39;,&#39;k3&#39;:&#39;v3&#39;} 【循环判断】</span>
<span class="c1"># 3. 敏感字</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id25">
<h2><a class="toc-backref" href="#id155"><span class="section-number">3.7. </span>集合</a><a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">}</span>

<span class="c1"># 空集合</span>
<span class="n">v1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</pre></div>
</div>
<p>独有功能</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 添加</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">}</span>
<span class="n">v</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;blsnt&#39;</span><span class="p">)</span>

<span class="c1"># 删除</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;blsnt&#39;</span><span class="p">}</span>
<span class="n">v1</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="s1">&#39;blsnt&#39;</span><span class="p">)</span> <span class="c1"># 无序，不能使用索引删除，不存在不会报错</span>

<span class="c1"># 批量添加</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;blsnt&#39;</span><span class="p">}</span>
<span class="n">v1</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">})</span>

<span class="c1"># 交集</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;blsnt&#39;</span><span class="p">}</span>
<span class="n">restult</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="n">intersection</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;blsnt&#39;</span><span class="p">})</span>  <span class="c1"># 会重新生成值，也可以是列表[1,&#39;blsnt&#39;]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">restult</span><span class="p">)</span>

<span class="c1"># 并集</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;blsnt&#39;</span><span class="p">}</span>
<span class="n">restult</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="n">union</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;blsnt&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">restult</span><span class="p">)</span>

<span class="c1"># 差集</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;blsnt&#39;</span><span class="p">}</span>
<span class="n">restult</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="n">difference</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;blsnt&#39;</span><span class="p">})</span> <span class="c1"># v1里面有的，这里面没有的</span>
<span class="nb">print</span><span class="p">(</span><span class="n">restult</span><span class="p">)</span>
</pre></div>
</div>
<p>公共功能</p>
<ul>
<li><p>len</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;李邵奇&#39;</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>for循环</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;李邵奇&#39;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>索引【无】</p></li>
<li><p>步长【无】</p></li>
<li><p>切片【无】</p></li>
<li><p>删除【无】</p></li>
<li><p>修改【无】</p></li>
</ul>
<p>元祖嵌套</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1.列表/字典/集合 -&gt; 不能放在集合中+不能作为字典的key</span>

<span class="c1"># 特殊情况</span>
<span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;国风&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span> <span class="c1"># {0, 2, 3, 4, &#39;国风&#39;, None, (1, 2, 3)}</span>

<span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span>
    <span class="kc">True</span><span class="p">:</span><span class="s1">&#39;oldboy&#39;</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span> <span class="c1"># {1: &#39;oldboy&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="id26">
<h2><a class="toc-backref" href="#id156"><span class="section-number">3.8. </span>内存相关(小数据池)</a><a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>v1 = [11,22,33]
v2 = [11,22,33]

v1 = 666
v2 = 666


# 按理 v1 和 v2 应该是不同的内存地址。特殊：
1. 整型：  -5 ~ 256
2. 字符串：&quot;alex&quot;,&#39;asfasd asdf asdf d_asdf &#39;       ----&quot;f_*&quot; * 3  - 重新开辟内存。
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">]</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">v1</span>

<span class="c1"># 练习1 (内部修改)</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">]</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">v1</span>
<span class="n">v1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span> <span class="c1"># 含 666</span>

<span class="c1"># 练习2：（赋值）</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">]</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">v1</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span>

<span class="c1"># 练习3：(重新赋值)</span>
<span class="n">v1</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">v1</span>
<span class="n">v1</span> <span class="o">=</span> <span class="s1">&#39;oldboy&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="is">
<h2><a class="toc-backref" href="#id157"><span class="section-number">3.9. </span>==和is区别？</a><a class="headerlink" href="#is" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>== 用于比较值是否相等</p></li>
<li><p>is用于比较内存地址是否相等</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">v2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span><span class="p">)</span>  <span class="c1"># True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span> <span class="ow">is</span> <span class="n">v2</span><span class="p">)</span>  <span class="c1"># False</span>
</pre></div>
</div>
</div>
<div class="section" id="id27">
<h2><a class="toc-backref" href="#id158"><span class="section-number">3.10. </span>运算符</a><a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id28">
<h3><a class="toc-backref" href="#id159">算数运算</a><a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<p>以下假设变量：a=10，b=20</p>
<p><img alt="image2" src="http://images.dregs.top/images/20200220182511.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="o">-</span><span class="mi">100</span> <span class="n">之间所有的数相加</span>
<span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
  <span class="n">total</span> <span class="o">=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">count</span>
  <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id29">
<h3><a class="toc-backref" href="#id160">比较运算</a><a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<p>以下假设变量：a=10，b=20</p>
<p><img alt="image3" src="http://images.dregs.top/images/20200220182630.png" /></p>
</div>
<div class="section" id="id30">
<h3><a class="toc-backref" href="#id161">赋值运算</a><a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<p>以下假设变量：a=10，b=20</p>
<p><img alt="image4" src="http://images.dregs.top/images/20200220183529.png" /></p>
</div>
<div class="section" id="id31">
<h3><a class="toc-backref" href="#id162">逻辑运算</a><a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<p><img alt="image5" src="http://images.dregs.top/images/20200220185115.png" /></p>
<p>针对逻辑运算的进一步研究：</p>
<p>在没有()的情况下not 优先级高于 and，and优先级高于or，即优先级关系为(
)&gt;not&gt;and&gt;or，同一优先级从左往右计算。</p>
<p>例题：</p>
<p>判断下列逻辑语句的True，False。</p>
<p>x or y , x为真，值就是x，x为假，值是y；</p>
<p>x and y, x为真，值是y,x为假，值是x。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span><span class="o">&gt;</span><span class="mi">4</span> <span class="ow">or</span> <span class="mi">4</span><span class="o">&lt;</span><span class="mi">3</span> <span class="ow">and</span> <span class="mi">1</span><span class="o">==</span><span class="mi">1</span>
<span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="mi">1</span><span class="o">&gt;</span><span class="mi">2</span>
<span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="mi">4</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">1</span>
<span class="ow">not</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="mi">4</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">9</span> <span class="o">&gt;</span> <span class="mi">8</span> <span class="ow">or</span> <span class="mi">7</span> <span class="o">&lt;</span> <span class="mi">6</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>&lt; or &gt;
v1 = 0 or 1 # 1
v2 = 8 or 10 # 8
v3 = 0 or 9 or 8 # 9
第一个值如果是转换成布尔值如果是真，则value=第一值
第一个值如果是转换成布尔值如果是假，则value=第二值
如果有多个or条件，则从左到右依次进行比较

&lt; and &gt;
v1 = 1 and 9 # 9
v2 = 1 and 0 # 0
v3 = 0 and 7 # 0
v4 = 0 and &quot;&quot; # 0
v5 = 1 and 0 and 9 # 0
如果第一个值转换成布尔值是True，则value=第二个值
如果第一个值转换成布尔值是False，则value=第一个值
多个and条件，则从左到右依次进行比较

&lt; 综合 &gt;
v1 = 1 and 9 or 0 and  6 # 9
</pre></div>
</div>
</div>
</div>
<div class="section" id="in-not-in">
<h2><a class="toc-backref" href="#id163"><span class="section-number">3.11. </span>in &amp; not in</a><a class="headerlink" href="#in-not-in" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>in</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;我是中国人&quot;</span>
<span class="n">v1</span> <span class="o">=</span> <span class="s2">&quot;中国&quot;</span> <span class="ow">in</span> <span class="n">value</span>  <span class="c1"># 判断中国是否在value所代指的字符串中，得到布尔类型</span>

<span class="c1"># 示列</span>
<span class="n">content</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入内容：&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="s1">&#39;退钱&#39;</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;包含敏感字符&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>not in</p></li>
</ul>
<p>练习题</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 三次登录失败就退出</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入用户名：&quot;</span><span class="p">)</span>
    <span class="n">pwd</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入密码：&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">user</span> <span class="o">==</span> <span class="s1">&#39;blsnt&#39;</span> <span class="ow">and</span> <span class="n">pwd</span> <span class="o">==</span> <span class="s1">&#39;blsnt&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;登录成功&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;登录失败&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">==</span><span class="mi">3</span><span class="p">:</span><span class="k">break</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># 需求：允许用户最多尝试三次登录，没尝试三次过后，如果还没输入正确，就问用户是否还想继续玩，如果回答Y，就继续让其猜3次，以此往复</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入用户名：&quot;</span><span class="p">)</span>
    <span class="n">pwd</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入密码：&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">user</span> <span class="o">==</span> <span class="s1">&#39;blsnt&#39;</span> <span class="ow">and</span> <span class="n">pwd</span> <span class="o">==</span> <span class="s1">&#39;blsnt&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;登录成功&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;登录失败&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">==</span><span class="mi">3</span><span class="p">:</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入是否继续(Y/N):&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;输入错误&quot;</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># 三次登录，并打印剩余登录次数</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">while</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">user</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入用户名：&quot;</span><span class="p">)</span>
  <span class="n">pwd</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入密码：&quot;</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">user</span> <span class="o">==</span> <span class="s1">&#39;alex&#39;</span>  <span class="ow">and</span> <span class="n">pwd</span> <span class="o">==</span> <span class="s1">&#39;alex&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;登录成功&quot;</span><span class="p">)</span>
    <span class="k">break</span>
  <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;用户名或密码输入错误，剩余</span><span class="si">%s</span><span class="s2">次机会&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">count</span><span class="p">,)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
  <span class="n">count</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;三次机会用完&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id32">
<h2><a class="toc-backref" href="#id164"><span class="section-number">3.12. </span>深浅拷贝</a><a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 浅拷贝</span>
<span class="c1"># 应该每次都会拷贝一会(但由于小数据池,未拷贝)</span>
<span class="n">v1</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span><span class="nb">id</span><span class="p">(</span><span class="n">v2</span><span class="p">))</span>

<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">]]</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span><span class="nb">id</span><span class="p">(</span><span class="n">v2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">4</span><span class="p">]),</span><span class="nb">id</span><span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>

<span class="c1"># 深拷贝，有嵌套的时候才有意义</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">]]</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span><span class="nb">id</span><span class="p">(</span><span class="n">v2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">4</span><span class="p">]),</span><span class="nb">id</span><span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>
</pre></div>
</div>
<p>练习</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 浅拷贝</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>

<span class="n">v2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span><span class="p">)</span> <span class="c1"># True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span> <span class="ow">is</span> <span class="n">v2</span><span class="p">)</span> <span class="c1"># False</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># True</span>

<span class="c1"># 深拷贝</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>

<span class="n">v2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span><span class="p">)</span> <span class="c1"># True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span> <span class="ow">is</span> <span class="n">v2</span><span class="p">)</span> <span class="c1"># False</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># True ,因为都是不可变数据类型，如果没有小数据池就会是False</span>

<span class="c1"># 案例</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,{</span><span class="s1">&#39;k1&#39;</span><span class="p">:</span><span class="mi">123</span><span class="p">}]</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span><span class="p">)</span> <span class="c1"># True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span> <span class="ow">is</span> <span class="n">v2</span><span class="p">)</span> <span class="c1"># False</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="n">v2</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>  <span class="c1"># False</span>

<span class="c1"># 特殊情况</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># 如果元祖是不可变类型，深浅拷贝都是一样的内存地址。里面如果有可变类型，内存地址会不一样</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span><span class="nb">id</span><span class="p">(</span><span class="n">v2</span><span class="p">))</span>
<span class="n">v3</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span><span class="nb">id</span><span class="p">(</span><span class="n">v3</span><span class="p">))</span>
</pre></div>
</div>
<blockquote>
<div><p>注意：浅拷贝只拷贝第一层，深拷贝只拷贝层次里面的所有可变类型</p>
</div></blockquote>
</div>
</div>
<div class="section" id="id33">
<h1><a class="toc-backref" href="#id165"><span class="section-number">4. </span>第四章 文件操作</a><a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id34">
<h2><a class="toc-backref" href="#id166"><span class="section-number">4.1. </span>文件基本操作</a><a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;路径&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;模式&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;编码&#39;</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id35">
<h2><a class="toc-backref" href="#id167"><span class="section-number">4.2. </span>打开模式</a><a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>r / w / a</p></li>
<li><p>r+ / w+ /a+</p></li>
<li><p>rb / wb /ab</p></li>
<li><p>r+b / w+b / a+b</p></li>
</ul>
</div>
<div class="section" id="id36">
<h2><a class="toc-backref" href="#id168"><span class="section-number">4.3. </span>操作</a><a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>read(),全部读到内存</p></li>
<li><p>read(1)</p>
<ul>
<li><p>1表示一个字符</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 1个字符</span>
<span class="n">obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>1表示一个字节</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 1个字节</span>
<span class="n">obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>write(字符串)</p></li>
<li><p>seek() ,无论模式是否带b，都是按照字节处理</p></li>
<li><p>tell(),获取光标当前所在字节位置</p></li>
<li><p>flush()，刷新到磁盘</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">val</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;请输入：&#39;</span><span class="p">)</span>
    <span class="n">v</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="n">v</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span> <span class="c1"># 强制刷到硬盘上</span>
<span class="n">v</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 数据会一直写在内存中</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id37">
<h2><a class="toc-backref" href="#id169"><span class="section-number">4.4. </span>关闭文件</a><a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h2>
<p>文艺青年</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">v</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>二逼</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="c1"># 缩进中的代码执行完毕后，自动关闭文件</span>
</pre></div>
</div>
</div>
<div class="section" id="id38">
<h2><a class="toc-backref" href="#id170"><span class="section-number">4.5. </span>文件修改</a><a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f1</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">f1</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">new_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;飞洒&#39;</span><span class="p">,</span><span class="s1">&#39;666&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f1</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">f1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">new_data</span><span class="p">)</span>
</pre></div>
</div>
<p>大文件修改</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">f2</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;b.txt&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f1</span><span class="p">:</span>
    <span class="n">new_line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;阿斯&#39;</span><span class="p">,</span><span class="s1">&#39;死啊&#39;</span><span class="p">)</span>
    <span class="n">f2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">new_line</span><span class="p">)</span>
<span class="n">f1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">f2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.txt&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f1</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;c.txt&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f2</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f1</span><span class="p">:</span>
        <span class="n">new_line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;阿斯&#39;</span><span class="p">,</span> <span class="s1">&#39;死啊&#39;</span><span class="p">)</span>
        <span class="n">f2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">new_line</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id39">
<h1><a class="toc-backref" href="#id171"><span class="section-number">5. </span>第五章 函数</a><a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id40">
<h2><a class="toc-backref" href="#id172"><span class="section-number">5.1. </span>三元运算</a><a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>v = 前面 if 条件 else 后面

if 条件：
    v = &#39;前面&#39;
else:
    v = &#39;后面&#39;
</pre></div>
</div>
</div>
<div class="section" id="id41">
<h2><a class="toc-backref" href="#id173"><span class="section-number">5.2. </span>函数的基本结构</a><a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 定义函数</span>
<span class="k">def</span> <span class="nf">函数名</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="c1"># 函数执行</span>
<span class="n">函数名</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_list_first_data</span><span class="p">():</span>
    <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">get_list_first_data</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id42">
<h2><a class="toc-backref" href="#id174"><span class="section-number">5.3. </span>函数的参数</a><a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h2>
<p>什么是形参？顾名思义，形参就是形式上的参数，可以理解为数学的X，没有实际的值，通过别人赋值后才有意义。相当于变量。</p>
<p>什么是实参？顾名思义，实参就是实际意义上的参数，是一个实际存在的参数，可以是字符串或是数字等</p>
<div class="section" id="id43">
<h3><a class="toc-backref" href="#id175">形参</a><a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_list_first_data</span><span class="p">(</span><span class="n">a</span><span class="p">):</span> <span class="c1"># 形参</span>
    <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>

<span class="n">get_list_first_data</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 实参</span>
</pre></div>
</div>
<p>练习题</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1.写一个函数，函数计算列表info = [11,22,33,44,55]中所有元素的和</span>
<span class="k">def</span> <span class="nf">get_num</span><span class="p">():</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">55</span><span class="p">]</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
<span class="n">get_num</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="id44">
<h4>万能参数<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="p">,</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># (1, 2, 3, 4, 5) {&#39;a&#39;: 2, &#39;b&#39;: 6}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id45">
<h3><a class="toc-backref" href="#id176">实参</a><a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id46">
<h4>位置传参<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id47">
<h4>关键字传参<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="n">a1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">a2</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># 关键字传参和位置传参混合使用</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">,</span><span class="n">a3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">,</span><span class="n">a3</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">a3</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>注意: 关键字参数不能放在位置参数前面</p>
</div></blockquote>
</div>
<div class="section" id="id48">
<h4>默认参数<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="o">=</span><span class="mi">9</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># func函数接收两个参数，调用函数进行船只时</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">a2</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># 不传第二个参数的话，就会引用a2=9这个默认参数</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id49">
<h2><a class="toc-backref" href="#id177"><span class="section-number">5.4. </span>函数的返回值</a><a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_num</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">count</span> <span class="c1"># 返回值，可以添加,返回多个，默认返回None</span>
<span class="n">count</span> <span class="o">=</span> <span class="n">get_num</span><span class="p">([</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">55</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="id50">
<h2><a class="toc-backref" href="#id178"><span class="section-number">5.5. </span>作用域</a><a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h2>
<p>py文件：全局作用域</p>
<p>函数：局部作用域</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">def</span> <span class="nf">s1</span><span class="p">():</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="mi">666</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">s1</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">88888</span>
<span class="k">def</span> <span class="nf">s2</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
    <span class="n">s1</span><span class="p">()</span>

<span class="n">s2</span><span class="p">()</span>
</pre></div>
</div>
<p>总结：</p>
<ul>
<li><p>一个函数是一个作用域</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>作用域中查找数据规则：优先在自己的作用域找数据，自己没有就去 “父级”
-&gt; “父级” -&gt;
直到全局，全部么有就报错。注意：父级作用域中的值到底是什么？</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">func</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>子作用域只能在父级找到值，默认无法赋值</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;oldboy&#39;</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="n">func</span><span class="p">()</span> <span class="c1"># 这个只能找到alex，在自己作用域中创建了一个name=&#39;alex&#39;</span>
</pre></div>
</div>
</li>
</ul>
<div class="section" id="global">
<h3><a class="toc-backref" href="#id179">global</a><a class="headerlink" href="#global" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;oldboy&#39;</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">name</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="n">func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1"># alex  global 关键字修改全局name值</span>
</pre></div>
</div>
</div>
<div class="section" id="nonlocal">
<h3><a class="toc-backref" href="#id180">nonlocal</a><a class="headerlink" href="#nonlocal" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;oldboy&#39;</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">name</span> <span class="c1"># 找到上一级的name</span>
        <span class="n">name</span> <span class="o">=</span> <span class="mi">999</span>
    <span class="n">inner</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="n">func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id51">
<h2><a class="toc-backref" href="#id181"><span class="section-number">5.6. </span>函数嵌套</a><a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;oldboy&#39;</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">inner</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="n">func</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id52">
<h2><a class="toc-backref" href="#id182"><span class="section-number">5.7. </span>函数小高级</a><a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id53">
<h3><a class="toc-backref" href="#id183">函数可以当做变量来使用</a><a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">func</span>
<span class="n">func</span><span class="p">()</span>
<span class="n">v1</span><span class="p">()</span>

<span class="c1"># 函数放在列表当元素</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="n">func</span><span class="p">,</span><span class="n">func</span><span class="p">,</span><span class="n">func</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">v1</span><span class="p">:</span>
    <span class="n">i</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id54">
<h3><a class="toc-backref" href="#id184">函数可以当做参数进行传递</a><a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">func</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">000</span>
<span class="n">func</span><span class="p">(</span><span class="n">show</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="n">arg</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">show</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="n">show</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="lambda">
<h2><a class="toc-backref" href="#id185"><span class="section-number">5.8. </span>lambda 表达式</a><a class="headerlink" href="#lambda" title="Permalink to this headline">¶</a></h2>
<p>用于表示简单的函数的</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">v1</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">v1</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c1"># 三元运算</span>
<span class="n">v1</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">if</span> <span class="mi">2</span><span class="o">&gt;</span><span class="mi">1</span> <span class="k">else</span> <span class="mi">5</span>

<span class="c1"># lambda表达式，为了解决简单函数的情况</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span>

<span class="n">func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">:</span><span class="n">a1</span><span class="o">+</span><span class="n">a2</span>  <span class="c1"># 隐藏了一个return</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>lambda表达式种类</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">func1</span> <span class="o">=</span> <span class="k">lambda</span> <span class="p">:</span><span class="mi">100</span> <span class="c1"># 没有参数返回100</span>

<span class="n">func2</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="n">func2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="n">DATA</span> <span class="o">=</span> <span class="mi">100</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">DATA</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">func4</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a1</span><span class="p">:</span> <span class="n">a1</span><span class="o">+</span><span class="n">DATA</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">func4</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">func</span><span class="p">()</span>

<span class="n">func5</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n1</span><span class="p">,</span><span class="n">n2</span><span class="p">:</span> <span class="n">n1</span> <span class="k">if</span> <span class="n">n1</span> <span class="o">&gt;</span> <span class="n">n2</span> <span class="k">else</span> <span class="n">n2</span>
</pre></div>
</div>
<blockquote>
<div><p>列表所有方法基本都是返回None，字符串的所有方法基本都是返回新值</p>
</div></blockquote>
</div>
<div class="section" id="id55">
<h2><a class="toc-backref" href="#id186"><span class="section-number">5.9. </span>内置函数</a><a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>自定义函数</p></li>
<li><p>内置函数</p>
<ul>
<li><p>len</p></li>
<li><p>open</p></li>
<li><p>range</p></li>
<li><p>id</p></li>
<li><p>输入输出</p>
<ul class="simple">
<li><p>print</p></li>
<li><p>input</p></li>
</ul>
</li>
<li><p>强制转换</p>
<ul class="simple">
<li><p>dict</p></li>
<li><p>list</p></li>
<li><p>tuple</p></li>
<li><p>int</p></li>
<li><p>str</p></li>
<li><p>bool</p></li>
<li><p>set</p></li>
</ul>
</li>
<li><p>数学相关</p>
<ul>
<li><p>abs，绝对值</p></li>
<li><p>float, 浮点型</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="mi">55</span>
<span class="n">v1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span> <span class="c1"># 55.0</span>
</pre></div>
</div>
</li>
<li><p>max, 找到最大值</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">455</span><span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="c1"># 455</span>
</pre></div>
</div>
</li>
<li><p>min，找到最小值</p></li>
<li><p>sum，求和</p></li>
<li><p>divmod，两个数相除，得商和余数</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="mi">1001</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>练习题</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 通过分页对数据进行显示</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>
<span class="n">USER_LIST</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">836</span><span class="p">):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;blsnt-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="n">i</span><span class="p">}</span>
    <span class="n">USER_LIST</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

<span class="c1"># 数据总条数</span>
<span class="n">total_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">USER_LIST</span><span class="p">)</span>

<span class="c1"># 每页显示10条</span>
<span class="n">per_page_count</span> <span class="o">=</span> <span class="mi">10</span>

<span class="c1"># 总页码数</span>
<span class="n">max_page_num</span><span class="p">,</span><span class="n">a</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">total_count</span><span class="p">,</span><span class="n">per_page_count</span><span class="p">)</span>
<span class="k">if</span> <span class="n">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
    <span class="n">max_page_num</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">pager</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入要查看的页码：&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">pager</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">pager</span> <span class="o">&gt;</span> <span class="n">max_page_num</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;页码输入不合法，必须是1~</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="n">max_page_num</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="n">pager</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">pager</span> <span class="o">*</span> <span class="n">per_page_count</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">USER_LIST</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>进制相关</p>
<ul>
<li><p>bin，将其他进制转换成二进制</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">num</span> <span class="o">=</span> <span class="mi">13</span>
<span class="n">v1</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>oct，将其他进制转换成八进制</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">num</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">v1</span> <span class="o">=</span> <span class="nb">oct</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>int，将其他进制转换成十进制</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 二进制转十进制，其他的也是一样</span>
<span class="n">v1</span> <span class="o">=</span> <span class="s1">&#39;0b1101&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>hex，将其他进制转换成十六进制</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">num</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">v1</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>编码相关</p>
<ul>
<li><p>chr,将十进制数字转换成unicode编码中的对应字符串</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># c</span>
</pre></div>
</div>
</li>
<li><p>ord,根据字符找到在unicode中找到其对应的十进制</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># 65</span>
</pre></div>
</div>
<p>随机验证码练习题</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="k">def</span> <span class="nf">get_random_data</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">DATA</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span><span class="mi">90</span><span class="p">)</span>
        <span class="n">DATA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA</span><span class="p">)</span>

<span class="n">num</span> <span class="o">=</span> <span class="n">get_random_data</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>高级内置函数</p>
<ul>
<li><p>filter</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">,</span><span class="n">v1</span><span class="p">)</span> <span class="c1"># 函数返回True添加到列表中，返回False则丢弃</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>map，循环每个元素(第二个参数)，然后让每个元素执行函数(第一个参数)，将每个函数的返回值添加到列表中</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">args</span><span class="p">:</span> <span class="n">args</span> <span class="o">+</span> <span class="mi">100</span><span class="p">,</span><span class="n">v1</span><span class="p">)</span> <span class="c1"># 第一个参数必须是一个函数,第二个参数必须是可迭代的类型,循环列表拿到的每个值当做参数传递给函数，会将函数的返回值添加到空列表中</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">))</span> <span class="c1"># [111, 122, 133, 144]</span>
</pre></div>
</div>
</li>
<li><p>reduce，会将列表的元素相加</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span><span class="n">v1</span><span class="p">)</span> <span class="c1"># x第一次为1，y为2，第二次x为1+2=3，y为3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="c1"># 21</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id56">
<h2><a class="toc-backref" href="#id187"><span class="section-number">5.10. </span>函数中高级</a><a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id57">
<h3><a class="toc-backref" href="#id188">函数当返回值</a><a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>def func():
    print(123)

def bar()：
    return func

v = bar()
v()
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inner</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">bar</span><span class="p">()</span>
<span class="n">v</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;olboyd&#39;</span>
<span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inner</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">bar</span><span class="p">()</span>
<span class="n">v</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id58">
<h3><a class="toc-backref" href="#id189">闭包</a><a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<p>闭包概念：为函数创建一块区域并为其维护自己数据，以后执行时方便调用【应用场景：装饰器/SQLAlchemy源码】</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="n">v1</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">)</span>
<span class="n">v1</span><span class="p">()</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="s1">&#39;eric&#39;</span><span class="p">)</span>
<span class="n">v2</span><span class="p">()</span>
</pre></div>
</div>
<blockquote>
<div><p>注意name 是需要调用的，才能达到闭包的效果</p>
</div></blockquote>
</div>
</div>
<div class="section" id="id59">
<h2><a class="toc-backref" href="#id190"><span class="section-number">5.11. </span>装饰器</a><a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h2>
<p>目的：在不改变原函数的基础上，在函数执行前后自定义功能</p>
<div class="section" id="id60">
<h3><a class="toc-backref" href="#id191">装饰器基本格式</a><a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="nd">@x</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="id61">
<h3><a class="toc-backref" href="#id192">关于于参数</a><a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">x1</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="nd">@x1</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@x1</span>
<span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">a1</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="nd">@x1</span>
<span class="k">def</span> <span class="nf">f3</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="id62">
<h3><a class="toc-backref" href="#id193">关于返回值</a><a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">x1</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="nd">@x1</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="n">v1</span> <span class="o">=</span> <span class="n">f1</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">x1</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="nd">@x1</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">666</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">f1</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">x1</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="nd">@x1</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">666</span>

<span class="n">v1</span> <span class="o">=</span> <span class="n">f1</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id63">
<h3><a class="toc-backref" href="#id194">装饰器推荐写法</a><a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>装饰器建议写法：
def x1(func):
    def inner(*args,**kwargs):
        data = func(*args,**kwargs)
        return data
    return inner
</pre></div>
</div>
</div>
<div class="section" id="id64">
<h3><a class="toc-backref" href="#id195">关于前后</a><a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">x1</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;调用原函数之前&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># 执行原函数并获取返回值</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;调用员函数之后&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="nd">@x1</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="n">index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id65">
<h3><a class="toc-backref" href="#id196">带参数的装饰器</a><a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 第一步：执行 ret = xxx(index)</span>
<span class="c1"># 第二步：将返回值赋值给 index = ret</span>
<span class="nd">@xxx</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="c1"># 第一步：执行 v1 = uuu(9)</span>
<span class="c1"># 第二步：ret = v1(index)</span>
<span class="c1"># 第三步：index = ret</span>
<span class="nd">@uuu</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ################## 普通装饰器 #####################</span>
<span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;调用原函数之前&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># 执行原函数并获取返回值</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;调用员函数之后&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="nd">@wrapper</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="c1"># ################## 带参数装饰器 #####################</span>
<span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># 执行原函数并获取返回值</span>
            <span class="k">return</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">inner</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@x</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>练习题</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 写一个带参数的装饰器，实现：参数是多少，被装饰的函数就要执行多少次，把每次结果添加到列表中，最终返回列表。</span>
<span class="k">def</span> <span class="nf">xxx</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x函数&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wrapper函数&#39;</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># 执行原函数并获取返回值</span>
                <span class="n">v</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">inner</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@xxx</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">8</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="c1"># 写一个带参数的装饰器，实现：参数是多少，被装饰的函数就要执行多少次，并返回最后一次执行的结果【面试题】</span>
<span class="k">def</span> <span class="nf">xxx</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x函数&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wrapper函数&#39;</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># 执行原函数并获取返回值，data一直被覆盖</span>
            <span class="k">return</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">inner</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@xxx</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">8</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="c1"># 写一个带参数的装饰器，实现：参数是多少，被装饰的函数就要执行多少次，并返回执行结果中最大的值。</span>
<span class="k">def</span> <span class="nf">xxx</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x函数&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wrapper函数&#39;</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># 执行原函数并获取返回值</span>
                <span class="k">if</span> <span class="n">data</span> <span class="o">&gt;</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">data</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">inner</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@xxx</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">8</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="c1"># 不同需求的装饰器通过True和False实现不同的功能</span>
<span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="n">counter</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x函数&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wrapper函数&#39;</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">counter</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">123</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">inner</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@x</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun990</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@x</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">func10</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>示例</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;before&#39;</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">arg</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;after&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;666&#39;</span>


<span class="c1"># 示例一</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">v1 = index() # 执行index函数，打印123并返回666赋值给v1.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># 示例二</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">v2 = func(index) # v2是inner函数，arg=index函数</span>
<span class="sd">index = 666</span>
<span class="sd">v3 = v2()</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># 示例三</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">v4 = func(index)</span>
<span class="sd">index = v4  # index ==&gt; inner</span>
<span class="sd">index()</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># 示例四</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="n">index</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">arg</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">v</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="c1"># 第一步：执行func函数并将下面的函数参数传递，相当于：func(index)</span>
<span class="c1"># 第二步：将func的返回值重新赋值给下面的函数名。 index = func(index)</span>
<span class="nd">@func</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">666</span>

<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
<p>应用：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 计算函数执行时间</span>

<span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">end_time</span><span class="o">-</span><span class="n">start_time</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>
    <span class="k">return</span> <span class="n">inner</span>

<span class="nd">@wrapper</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="nd">@wrapper</span>
<span class="k">def</span> <span class="nf">func2</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">func3</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="n">func1</span><span class="p">()</span>
</pre></div>
</div>
<p>装饰器编写格式</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">外层函数</span><span class="p">(</span><span class="n">参数</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">内层函数</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">参数</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">内层函数</span>
</pre></div>
</div>
<p>装饰器应用格式</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@外层函数</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="n">index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id66">
<h2><a class="toc-backref" href="#id197"><span class="section-number">5.12. </span>推导式</a><a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id67">
<h3><a class="toc-backref" href="#id198">列表推导式</a><a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">目的：方便的生成一个列表。</span>
<span class="sd">格式：</span>
<span class="sd">    v1 = [i for i in 可迭代对象 ]</span>
<span class="sd">    v2 = [i for i in 可迭代对象 if 条件 ] # 条件为true才进行append</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="s1">&#39;alex&#39;</span> <span class="p">]</span>
<span class="n">v2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">100</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="n">v3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">99</span> <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">5</span> <span class="k">else</span> <span class="mi">66</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">100</span>
<span class="n">v4</span> <span class="o">=</span> <span class="p">[</span><span class="n">func</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>

<span class="n">v5</span> <span class="o">=</span> <span class="p">[</span><span class="k">lambda</span> <span class="p">:</span> <span class="mi">100</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">v5</span><span class="p">[</span><span class="mi">9</span><span class="p">]()</span>

<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">i</span>
<span class="n">v6</span> <span class="o">=</span> <span class="p">[</span><span class="n">func</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">v6</span><span class="p">[</span><span class="mi">5</span><span class="p">]()</span>

<span class="n">v7</span> <span class="o">=</span> <span class="p">[</span><span class="k">lambda</span> <span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">v7</span><span class="p">[</span><span class="mi">5</span><span class="p">]()</span>


<span class="n">v8</span> <span class="o">=</span> <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="c1"># 新浪微博面试题</span>
<span class="c1"># 1.请问 v8 是什么？</span>
<span class="c1"># 2.请问 v8[0](2) 的结果是什么？</span>

<span class="c1"># 面试题</span>
<span class="k">def</span> <span class="nf">num</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">i</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="c1"># num() -&gt; [函数,函数,函数,函数]</span>
<span class="nb">print</span><span class="p">([</span> <span class="n">m</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">num</span><span class="p">()</span> <span class="p">])</span> <span class="c1"># [6,6,6,6]</span>

<span class="c1"># ##################### 筛选 #########################</span>
<span class="n">v9</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id68">
<h3><a class="toc-backref" href="#id199">集合推导式</a><a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="p">{</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="s1">&#39;alex&#39;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id69">
<h3><a class="toc-backref" href="#id200">5.11.3 字典推导式</a><a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;k&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">):</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id70">
<h1><a class="toc-backref" href="#id201"><span class="section-number">6. </span>第六章 模块</a><a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h1>
<p>模块的概念：一系列功能的集合体，可以给其他文件提供功能</p>
<div class="section" id="id71">
<h2><a class="toc-backref" href="#id202"><span class="section-number">6.1. </span>模块基本知识</a><a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>内置模块，python内部提供的功能</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>自定义模块</p></li>
<li><p>第三方模块，下载/安装/使用</p></li>
</ul>
<p>python 找模块的地方</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

<span class="c1"># 添加目录路径</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;D:</span><span class="se">\t</span><span class="s1">est&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>定义模块时，可以把一个py文件或一个文件夹（包）当做一个模块，以方便以后其他py文件的调用</p>
<p>对于包的定义：</p>
<ul class="simple">
<li><p>py2：文件夹中必须有__init__.py</p></li>
<li><p>py3：不需要__init__.py</p></li>
</ul>
<div class="section" id="id72">
<h3><a class="toc-backref" href="#id203">导入模块方式</a><a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<p>导入模块,加载此模块中的所有的值到内存</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>import xxx

# import 所做的事情,xxx名字就是模块xxx的文件对象，存放的是xxx文件的地址
1. 将被导入的模块编译成模块名对应的pyc文件
2. 从上至下执行被调用模块的所有代码
3. 形成模块的名称空间,将模块中的所有名字存放在模块的名称空间中
4. 在要使用模块的文件(当前文件)的名称空间中产生一个与模块名同名的名字指向模块的名称空间

from xxx import xxx
from xxx import *
from xxx import xxx as f  # 模块起别名
1. 模块名与当前文件中名字发生冲突，用起名字解决冲突
2. 优化模块名

from xxx import xxx,zzz

# 相对导入
form . import xxx # 相对导入必须要有一个父级目录，在根目录不行
</pre></div>
</div>
</div>
<div class="section" id="base-dir">
<h3><a class="toc-backref" href="#id204">配置BASE_DIR</a><a class="headerlink" href="#base-dir" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 默认只有运行的py文件的目录会导入到系统path中,要排除pycharm导入</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">print</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>  <span class="c1"># 当前运行脚本的路径,要配置abspath获取绝对路径</span>
<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id73">
<h3><a class="toc-backref" href="#id205">项目常用目录</a><a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>bin 程序入口 可执行文件</p></li>
<li><p>config 配置文件</p></li>
<li><p>db 数据</p></li>
<li><p>lib 公共代码</p></li>
<li><p>src 业务代码</p></li>
<li><p>脚本</p></li>
</ul>
<p><img alt="image6" src="http://images.dregs.top/images/20200302210656.png" /></p>
<ul class="simple">
<li><p>单执行文件</p></li>
</ul>
<p><img alt="image7" src="http://images.dregs.top/images/20200302210831.png" /></p>
<ul class="simple">
<li><p>多执行文件</p></li>
</ul>
<p><img alt="image8" src="http://images.dregs.top/images/20200302210909.png" /></p>
</div>
<div class="section" id="id74">
<h3><a class="toc-backref" href="#id206">模块实现单例模式</a><a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># jd.py</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># app.py</span>
<span class="kn">import</span> <span class="nn">jd</span> <span class="c1"># 加载jd.py，加载最后会实例化一个Foo对象并赋值给obj</span>
<span class="nb">print</span><span class="p">(</span><span class="n">jd</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id75">
<h3><a class="toc-backref" href="#id207">重新加载模块</a><a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jd</span> <span class="c1"># 第一次加载：会加载一遍jd中所有的内容。</span>
<span class="kn">import</span> <span class="nn">jd</span> <span class="c1"># 由已经加载过，就不在加载。</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">456</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">importlib</span>
<span class="kn">import</span> <span class="nn">jd</span>
<span class="n">importlib</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">jd</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">456</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id76">
<h3><a class="toc-backref" href="#id208">模块的多次导入</a><a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># m1.py</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;导入模块&#39;</span><span class="p">)</span>

<span class="c1"># test.py</span>
<span class="c1"># 第一次导入模块已经完成导入模块的三步，编译，运行(产生名称空间存放名字)，执行文件产生名字指向模块</span>
<span class="kn">import</span> <span class="nn">m1</span>
<span class="c1"># 再次导入：前两步是重复的，所以只会在当前文件再产生一个名字指向模块的名称空间</span>
<span class="kn">import</span> <span class="nn">m1</span> <span class="k">as</span> <span class="nn">m</span>
</pre></div>
</div>
</div>
<div class="section" id="id77">
<h3><a class="toc-backref" href="#id209">模块导入的执行过程</a><a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#　执行文件.py</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;加载&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">m1</span>   <span class="c1">#　进入m1,m1全部走完回到这里</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;结束&#39;</span><span class="p">)</span>

<span class="c1">#　m1.py</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m1 开始&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">10</span>
<span class="kn">import</span> <span class="nn">m2</span>   <span class="c1"># 进入m2，m2全部走完回到这里</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m1 结束&#39;</span><span class="p">)</span>

<span class="c1"># m2.py</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m2 开始&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">20</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m2 结束&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>执行过程结果</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">加载</span>
<span class="n">m1</span> <span class="n">开始</span>
<span class="n">m2</span> <span class="n">开始</span>
<span class="n">m2</span> <span class="n">结束</span>
<span class="n">m1</span> <span class="n">结束</span>
<span class="n">结束</span>
</pre></div>
</div>
<blockquote>
<div><p>注意在执行文件中访问20</p>
<p>print(m1.m2.y)</p>
</div></blockquote>
</div>
<div class="section" id="py">
<h3><a class="toc-backref" href="#id210">py文件的两种执行方式</a><a class="headerlink" href="#py" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>自执行</p>
<ul>
<li><p>在模块中的__name__ = __main__</p></li>
</ul>
</li>
<li><p>模块方式导入执行</p>
<ul>
<li><p>作为模块导入执行__name__ = ‘模块名’</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 执行的py</span>
<span class="kn">import</span> <span class="nn">m1</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;模块导入执行&#39;</span><span class="p">,</span><span class="n">num</span><span class="p">)</span>

<span class="c1"># m1.py</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;模块自执行&#39;</span><span class="p">,</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>模块导入执行的__name__ 是模块名，自执行的时候是__main__</p>
</div></blockquote>
<p>共存</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 模块文件</span>
<span class="c1"># 先写所有的模块资源(数据与函数)</span>
<span class="c1"># 模块最下方</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span>
    <span class="c1"># 自执行的逻辑代码</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id78">
<h2><a class="toc-backref" href="#id211"><span class="section-number">6.2. </span>常用内置模块</a><a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>logging</p></li>
</ul>
<p>基本应用</p>
<p>日志处理本质：Logger/FileHandler/Formatter</p>
<p>推荐处理日志方式</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">file_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;x1.log&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> -</span><span class="si">%(module)s</span><span class="s1">:  </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %p&#39;</span><span class="p">,</span>
    <span class="n">handlers</span><span class="o">=</span><span class="p">[</span><span class="n">file_handler</span><span class="p">,],</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span>
<span class="p">)</span>

<span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;你好&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>推荐处理日志方式 + 日志分割</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">handlers</span>
<span class="c1"># file_handler = logging.FileHandler(filename=&#39;x1.log&#39;, mode=&#39;a&#39;, encoding=&#39;utf-8&#39;,)</span>
<span class="n">file_handler</span> <span class="o">=</span> <span class="n">handlers</span><span class="o">.</span><span class="n">TimedRotatingFileHandler</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;x3.log&#39;</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> -</span><span class="si">%(module)s</span><span class="s1">:  </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %p&#39;</span><span class="p">,</span>
    <span class="n">handlers</span><span class="o">=</span><span class="p">[</span><span class="n">file_handler</span><span class="p">,],</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100000</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</pre></div>
</div>
<p>注意事项：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 在应用日志时，如果想要保留异常的堆栈信息。</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;wf.log&#39;</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> -</span><span class="si">%(module)s</span><span class="s1">:  </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %p&#39;</span><span class="p">,</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span>
<span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://www.xxx.com&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="c1"># 调用e.__str__方法</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>settings配置</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># settings.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<span class="n">LOG_FILE_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span><span class="s1">&#39;log&#39;</span><span class="p">,</span><span class="s1">&#39;cmdb.log&#39;</span><span class="p">)</span>
<span class="n">LOG_WHEN</span> <span class="o">=</span> <span class="s2">&quot;s&quot;</span>
<span class="n">LOG_INTERVAL</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c1"># log.py配置</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">handlers</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">settings</span>


<span class="k">def</span> <span class="nf">get_logger</span><span class="p">():</span>
    <span class="n">file_handler</span> <span class="o">=</span> <span class="n">handlers</span><span class="o">.</span><span class="n">TimedRotatingFileHandler</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">LOG_FILE_PATH</span><span class="p">,</span>
                                                     <span class="n">when</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">LOG_WHEN</span><span class="p">,</span>
                                                     <span class="n">interval</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">LOG_INTERVAL</span><span class="p">,</span>
                                                     <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
        <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> -</span><span class="si">%(module)s</span><span class="s1">:  </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %p&#39;</span><span class="p">,</span>
        <span class="n">handlers</span><span class="o">=</span><span class="p">[</span><span class="n">file_handler</span><span class="p">],</span>
        <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">logging</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">()</span>
</pre></div>
</div>
<p>logging高级用法</p>
<p>默认日志级别30</p>
<p>日志模块的详细用法：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="c1"># 1.Logger: 产生日志</span>
<span class="c1"># 2.Filter: 几乎不用</span>
<span class="c1"># 3.Handler：接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件(可以有多个)</span>
<span class="c1"># 4.Formatter：日志格式</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">critical=50</span>
<span class="sd">error =40</span>
<span class="sd">warning =30</span>
<span class="sd">info = 20</span>
<span class="sd">debug =10</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="c1">#1、logger对象：负责产生日志，然后交给Filter过滤，然后交给不同的Handler输出</span>
<span class="n">logger</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>

<span class="c1">#2、Filter对象：不常用，略</span>

<span class="c1">#3、Handler对象：接收logger传来的日志，然后控制输出</span>
<span class="n">h1</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="s1">&#39;t1.log&#39;</span><span class="p">)</span> <span class="c1">#打印到文件</span>
<span class="n">h2</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="s1">&#39;t2.log&#39;</span><span class="p">)</span> <span class="c1">#打印到文件</span>
<span class="n">h3</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span> <span class="c1">#打印到终端</span>

<span class="c1">#4、Formatter对象：日志格式</span>
<span class="n">formmater1</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> -</span><span class="si">%(module)s</span><span class="s1">:  </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
                    <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %p&#39;</span><span class="p">,)</span>

<span class="n">formmater2</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> :  </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
                    <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %p&#39;</span><span class="p">,)</span>

<span class="n">formmater3</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(name)s</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,)</span>


<span class="c1">#5、为Handler对象绑定格式</span>
<span class="n">h1</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formmater1</span><span class="p">)</span>
<span class="n">h2</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formmater2</span><span class="p">)</span>
<span class="n">h3</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formmater3</span><span class="p">)</span>

<span class="c1">#6、将Handler添加给logger并设置日志级别</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">h1</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">h2</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">h3</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c1">#7、测试</span>
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;warning&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;critical&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>python 之 logger日志 字典配置文件</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># settings.py</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">)</span>


<span class="c1"># 定义日志文件的路径</span>
<span class="n">LOG_PATH</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span><span class="s1">&#39;logs&#39;</span><span class="p">,</span><span class="s1">&#39;access.log&#39;</span><span class="p">)</span>

<span class="c1"># 定义三种日志输出格式 开始</span>
<span class="n">standard_format</span> <span class="o">=</span> <span class="s1">&#39;[</span><span class="si">%(asctime)s</span><span class="s1">][</span><span class="si">%(threadName)s</span><span class="s1">:</span><span class="si">%(thread)d</span><span class="s1">][task_id:</span><span class="si">%(name)s</span><span class="s1">][</span><span class="si">%(filename)s</span><span class="s1">:</span><span class="si">%(lineno)d</span><span class="s1">]&#39;</span> \
                  <span class="s1">&#39;[</span><span class="si">%(levelname)s</span><span class="s1">][</span><span class="si">%(message)s</span><span class="s1">]&#39;</span> <span class="c1">#其中name为getlogger指定的名字</span>

<span class="c1">#simple_format = &#39;[%(asctime)s] - [%(name)s] - %(levelname)s -%(module)s:  %(message)s&#39;</span>

<span class="n">simple_format</span> <span class="o">=</span>  <span class="s1">&#39;[</span><span class="si">%(levelname)s</span><span class="s1">][</span><span class="si">%(asctime)s</span><span class="s1">][</span><span class="si">%(filename)s</span><span class="s1">:</span><span class="si">%(lineno)d</span><span class="s1">]</span><span class="si">%(message)s</span><span class="s1">&#39;</span>

<span class="n">id_simple_format</span> <span class="o">=</span> <span class="s1">&#39;[</span><span class="si">%(levelname)s</span><span class="s1">][</span><span class="si">%(asctime)s</span><span class="s1">] </span><span class="si">%(message)s</span><span class="s1">&#39;</span>

<span class="c1"># log配置字典</span>
<span class="n">LOGGING_DIC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="c1"># 禁用已经存在的logger实例</span>
    <span class="s1">&#39;disable_existing_loggers&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="c1"># 定义日志 格式化的 工具</span>
    <span class="s1">&#39;formatters&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;standard&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="n">standard_format</span>
        <span class="p">},</span>
        <span class="s1">&#39;simple&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="n">simple_format</span>
        <span class="p">},</span>
        <span class="s1">&#39;id_simple&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="n">id_simple_format</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="c1"># 过滤</span>
    <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="p">{},</span>  <span class="c1"># jango此处不同</span>
    <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1">#打印到终端的日志</span>
        <span class="s1">&#39;stream&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span>
            <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;logging.StreamHandler&#39;</span><span class="p">,</span>  <span class="c1"># 打印到屏幕</span>
            <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="s1">&#39;standard&#39;</span>
        <span class="p">},</span>
        <span class="c1">#打印到文件的日志,收集info及以上的日志</span>
        <span class="s1">&#39;access&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span>
            <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;logging.handlers.RotatingFileHandler&#39;</span><span class="p">,</span>  <span class="c1"># 保存到文件</span>
            <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="s1">&#39;standard&#39;</span><span class="p">,</span>
            <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="n">LOG_PATH</span><span class="p">,</span>       <span class="c1"># 日志文件路径</span>
            <span class="s1">&#39;maxBytes&#39;</span><span class="p">:</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">5</span><span class="p">,</span>  <span class="c1"># 日志大小 5M</span>
            <span class="s1">&#39;backupCount&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s1">&#39;encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>  <span class="c1"># 日志文件的编码，再也不用担心中文log乱码了</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="c1"># logger实例</span>
    <span class="s1">&#39;loggers&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1"># 默认的logger应用如下配置</span>
        <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">,</span> <span class="s1">&#39;access&#39;</span><span class="p">],</span>  <span class="c1"># 这里把上面定义的两个handler都加上，即log数据既写入文件又打印到屏幕</span>
            <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span>
            <span class="s1">&#39;propagate&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># 向上（更高level的logger）传递</span>
        <span class="p">},</span>
        <span class="c1"># logging.getLogger(__name__)拿到的logger配置</span>
        <span class="c1"># 这样我们再取logger对象时logging.getLogger(__name__)，不同的文件__name__不同，这保证了打印日志时标识信息不同，</span>
        <span class="c1"># 但是拿着该名字去loggers里找key名时却发现找不到，于是默认使用key=&#39;&#39;的配置</span>
    <span class="p">},</span>
<span class="p">}</span>


<span class="c1"># common.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">logging.config</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="k">def</span> <span class="nf">load_my_logging_cfg</span><span class="p">(</span><span class="n">log_name</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dictConfig</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">LOGGING_DIC</span><span class="p">)</span>  <span class="c1"># 导入上面定义的logging配置</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">log_name</span><span class="p">)</span>  <span class="c1"># 生成一个log实例</span>
    <span class="k">return</span>  <span class="n">logger</span>

<span class="c1"># run.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">lib</span> <span class="kn">import</span> <span class="n">common</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;adgdsg&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">load_my_logging_cfg</span><span class="p">(</span><span class="s1">&#39;吃饭功能&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>importlib</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">importlib</span>
<span class="c1"># 用字符串的形式导入模块。</span>
<span class="n">redis</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="s1">&#39;utils.redis&#39;</span><span class="p">)</span>
<span class="c1"># 用字符串的形式去对象（模块）找到他的成员。</span>
<span class="nb">getattr</span><span class="p">(</span><span class="n">redis</span><span class="p">,</span><span class="s1">&#39;func&#39;</span><span class="p">)()</span>


<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">redis</span>
<span class="kn">import</span> <span class="nn">importlib</span>

<span class="n">middleware_classes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;utils.redis.Redis&#39;</span><span class="p">,</span>
    <span class="c1"># &#39;utils.mysql.MySQL&#39;,</span>
    <span class="s1">&#39;utils.mongo.Mongo&#39;</span>
<span class="p">]</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">middleware_classes</span><span class="p">:</span>
    <span class="n">module_path</span><span class="p">,</span><span class="n">class_name</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">module_object</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span><span class="c1"># from utils import redis</span>
    <span class="bp">cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module_object</span><span class="p">,</span><span class="n">class_name</span><span class="p">)</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<blockquote>
<div><p>补充：开放封闭原则（源代码不改变，改变输入信息，输出信息随即改变）</p>
</div></blockquote>
<ul class="simple">
<li><p>shutil</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">shutil</span>

<span class="c1"># 删除目录</span>
<span class="c1"># shutil.rmtree(&#39;test&#39;)</span>

<span class="c1"># 重命名</span>
<span class="c1"># shutil.move(&#39;test&#39;,&#39;ttt&#39;)</span>

<span class="c1"># 压缩文件</span>
<span class="c1"># shutil.make_archive(&#39;zzh&#39;,&#39;zip&#39;,&#39;D:\code\s21day16\lizhong&#39;)</span>

<span class="c1"># 解压文件</span>
<span class="c1"># shutil.unpack_archive(&#39;zzh.zip&#39;,extract_dir=r&#39;D:\code\xxxxxx\xxxx&#39;,format=&#39;zip&#39;)</span>
</pre></div>
</div>
<p>示例</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="n">ctime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">-%H-%M-%S&#39;</span><span class="p">)</span>

<span class="c1"># 1.压缩lizhongwei文件夹 zip</span>
<span class="c1"># 2.放到到 code 目录（默认不存在）</span>
<span class="c1"># 3.将文件解压到D:\x1目录中。</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">make_archive</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="n">ctime</span><span class="p">),</span><span class="s1">&#39;zip&#39;</span><span class="p">,</span><span class="s1">&#39;D:\code\s21day16\lizhongwei&#39;</span><span class="p">)</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="n">ctime</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.zip&#39;</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">unpack_archive</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;D:\x1&#39;</span><span class="p">,</span><span class="s1">&#39;zip&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>random</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># randint 随机</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="k">def</span> <span class="nf">get_random_data</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">DATA</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span><span class="mi">90</span><span class="p">)</span>  <span class="c1"># 随机取65-90之间的数字</span>
        <span class="n">DATA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA</span><span class="p">)</span>

<span class="n">num</span> <span class="o">=</span> <span class="n">get_random_data</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>hashlib</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># md5 将指定的字符串进行加密</span>
<span class="kn">import</span> <span class="nn">hashlib</span>

<span class="k">def</span> <span class="nf">get_md5</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="n">val</span> <span class="o">=</span> <span class="n">get_md5</span><span class="p">(</span><span class="s1">&#39;122453535&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="c1"># 加盐</span>
<span class="kn">import</span> <span class="nn">hashlib</span>

<span class="k">def</span> <span class="nf">get_md5</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="s1">&#39;adgfsdgesgasdg&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="n">val</span> <span class="o">=</span> <span class="n">get_md5</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="c1">#</span>
</pre></div>
</div>
<ul class="simple">
<li><p>getpass</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 密码不显示</span>
<span class="n">pwd</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s1">&#39;请输入密码&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pwd</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>os</p></li>
</ul>
<p>和操作系统相关的数据。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 文件或目录是否存在
os.path.exists(path)  如果path存在，返回True；如果path不存在，返回False

# 文件大小
os.stat(&#39;20190409_192149.mp4&#39;).st_size  获取文件大小

# 文件绝对路径
os.path.abspath()   获取一个文件的绝对路径

# 获取路径的上级目录
os.path.dirname 获取路径的上级目录

# 路径的拼接
# os.path.join
import os
path = &quot;D:\code\s21day14&quot; # user/index/inx/fasd/
v = &#39;n.txt&#39;

result = os.path.join(path,v)
print(result)
result = os.path.join(path,&#39;n1&#39;,&#39;n2&#39;,&#39;n3&#39;)
print(result)

# 查看一个目录下所有的文件【第一层】
import os

result = os.listdir(r&#39;D:\code\s21day14&#39;)
for path in result:
    print(path)

# 查看一个目录下所有的文件【所有层】
import os

result = os.walk(r&#39;D:\code\s21day14&#39;)
for a,b,c in result:
    # a,正在查看的目录 b,此目录下的文件夹  c,此目录下的文件
    for item in c:
        path = os.path.join(a,item)
        print(path)

# 创建文件夹，可以多级创建
os.makedirs()

import os
file_path = r&#39;db\xx\xo\xxxxx.txt&#39;

file_folder = os.path.dirname(file_path)
if not os.path.exists(file_folder):
    os.makedirs(file_folder)

with open(file_path,mode=&#39;w&#39;,encoding=&#39;utf-8&#39;) as f:
    f.write(&#39;asdf&#39;)
</pre></div>
</div>
<ul class="simple">
<li><p>sys</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># python解释器相关的数据
import sys

# python默认支持的递归数量
print(sys.getrecursionlimit())

# 获取一个值的应用计数
a = [11,22,33]
b = a
print(sys.getrefcount(a))

# 进度条
import os
# 读取文件大小
file_path = &#39;CentOS-7-x86_64-DVD-1810.iso&#39;
file_size = os.stat(file_path).st_size

chunk_size = 1024
read_size = 0
with open(file_path,mode=&#39;rb&#39;) as f,open(&#39;centos.iso&#39;,mode=&#39;wb&#39;) as f1:
    while read_size &lt; file_size:
        chunk = f.read(1024) # 每次读最多1024个字节
        f1.write(chunk)
        read_size += len(chunk)
        val = int(read_size / file_size * 100)
        print(&#39;%s%%\r&#39; %val,end=&#39;&#39;)

# 获取脚本参数
获取用户执行脚本时，传入的参数。
C:\Python36\python36.exe D:/code/s21day14/7.模块传参.py D:/test
sys.argv = [D:/code/s21day14/7.模块传参.py, D:/test]

path = sys.argv[1]
#删除目录
import shutil
shutil.rmtree(path)

# sys.path ,默认python查找模块的目录
import sys
sys.path.append(&#39;路径&#39;)
</pre></div>
</div>
<ul class="simple">
<li><p>json</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># json.dumps() 序列化</span>
<span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,{</span><span class="s1">&#39;k1&#39;</span><span class="p">:</span><span class="s1">&#39;v1&#39;</span><span class="p">},</span><span class="kc">True</span><span class="p">,</span><span class="s1">&#39;asf&#39;</span><span class="p">]</span>
<span class="n">v_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># 序列化保留中文显示</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v_json</span><span class="p">)</span> <span class="c1"># [12, 3, 4, 5, {&quot;k1&quot;: &quot;v1&quot;}, true, &quot;asf&quot;]</span>


<span class="c1"># json.loads()  反序列化</span>
<span class="n">v</span> <span class="o">=</span> <span class="s1">&#39;[12, 3, 4, 5, {&quot;k1&quot;: &quot;v1&quot;}, true, &quot;asf&quot;]&#39;</span>
<span class="n">v_list</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v_list</span><span class="p">)</span> <span class="c1">#  [12, 3, 4, 5, {&#39;k1&#39;: &#39;v1&#39;}, True, &#39;asf&#39;]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>pickle</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>

<span class="c1"># #################### dumps/loads ######################</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">v = {1,2,3,4}</span>
<span class="sd">val = pickle.dumps(v)</span>
<span class="sd">print(val)</span>
<span class="sd">data = pickle.loads(val)</span>
<span class="sd">print(data,type(data))</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">def f1():</span>
<span class="sd">    print(&#39;f1&#39;)</span>

<span class="sd">v1 = pickle.dumps(f1)</span>
<span class="sd">print(v1)</span>
<span class="sd">v2 = pickle.loads(v1)</span>
<span class="sd">v2()</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># #################### dump/load ######################</span>
<span class="c1"># v = {1,2,3,4}</span>
<span class="c1"># f = open(&#39;x.txt&#39;,mode=&#39;wb&#39;)</span>
<span class="c1"># val = pickle.dump(v,f)</span>
<span class="c1"># f.close()</span>

<span class="c1"># f = open(&#39;x.txt&#39;,mode=&#39;rb&#39;)</span>
<span class="c1"># data = pickle.load(f)</span>
<span class="c1"># f.close()</span>
<span class="c1"># print(data)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>logging</p></li>
</ul>
</div>
<div class="section" id="id79">
<h2><a class="toc-backref" href="#id212"><span class="section-number">6.3. </span>异常处理</a><a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># finally 的运用</span>
<span class="n">def</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;asdf&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">123</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="n">func</span><span class="p">()</span>
<span class="c1">#即使return  finally最后也会执行</span>
</pre></div>
</div>
<p>主动抛出异常</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;dsfsegsdg&#39;</span><span class="p">)</span> <span class="c1">#主动触发异常</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;111&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>自定义异常</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">message</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">MyException</span><span class="p">(</span><span class="s1">&#39;asdf&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">MyException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id80">
<h2><a class="toc-backref" href="#id213"><span class="section-number">6.4. </span>第三方模块</a><a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id81">
<h2><a class="toc-backref" href="#id214"><span class="section-number">6.5. </span>主文件</a><a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id82">
<h1><a class="toc-backref" href="#id215"><span class="section-number">7. </span>第七章 面向对象</a><a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id83">
<h2><a class="toc-backref" href="#id216"><span class="section-number">7.1. </span>迭代器</a><a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h2>
<p>自己不会写迭代器，只用</p>
<p>任务：展示列表中所有的数据</p>
<ul class="simple">
<li><p>while + 索引 + 计数器</p></li>
<li><p>迭代器</p>
<ul>
<li><p>列表转迭代器</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id84">
<h2><a class="toc-backref" href="#id217"><span class="section-number">7.2. </span>生成器（函数的变异）</a><a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 生成器函数（内部是否包含yield）</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="n">arg</span> <span class="o">=</span> <span class="n">arg</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">yield</span> <span class="mi">1</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="k">yield</span> <span class="mi">100</span>
<span class="c1"># 函数内部代码不会执行，返回一个生成器对象</span>
<span class="n">func</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<p>from</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">base</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">88</span>
    <span class="k">yield</span> <span class="mi">99</span>

<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">1</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="k">yield from</span> <span class="n">base</span><span class="p">()</span>
    <span class="k">yield</span> <span class="mi">3</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>生成器推导式</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># def func():</span>
<span class="c1">#     result = []</span>
<span class="c1">#     for i in range(10):</span>
<span class="c1">#         result.append(i)</span>
<span class="c1">#     return result</span>
<span class="c1"># v1 = func()</span>
<span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="c1"># 列表推导式，立即循环创建所有元素。</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>


<span class="c1"># def func():</span>
<span class="c1">#     for i in range(10):</span>
<span class="c1">#         yield i</span>
<span class="c1"># v2 = func()</span>
<span class="n">v2</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="c1"># 生成器推导式，创建了一个生成器，内部循环为执行。</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id85">
<h2><a class="toc-backref" href="#id218"><span class="section-number">7.3. </span>面向对象基本格式</a><a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ###### 定义类 ######</span>
<span class="k">class</span> <span class="nc">类名</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">方法名</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">123</span>
    <span class="k">def</span> <span class="nf">方法名</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">123</span>
    <span class="k">def</span> <span class="nf">方法名</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">123</span>
<span class="c1"># ###### 调用类中的方法 ######</span>
<span class="c1"># 1.创建该类的对象</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">类名</span><span class="p">()</span>
<span class="c1"># 2.通过对象调用方法</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">方法名</span><span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>应用场景：遇到很多函数，需要给函数进行归类和划分。 【封装】</p>
</div>
<div class="section" id="id86">
<h2><a class="toc-backref" href="#id219"><span class="section-number">7.4. </span>类成员</a><a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>类</p>
<ul>
<li><p>类变量</p></li>
<li><p>绑定方法</p></li>
<li><p>类方法</p></li>
<li><p>静态方法</p></li>
<li><p>属性</p></li>
</ul>
</li>
<li><p>实例（对象）</p>
<ul>
<li><p>实例变量</p></li>
</ul>
</li>
</ul>
<div class="section" id="id87">
<h3><a class="toc-backref" href="#id220">实列变量（属于对象成员）</a><a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h3>
<p><img alt="image9" src="http://images.dregs.top/images/20200301042126.png" /></p>
</div>
<div class="section" id="id88">
<h3><a class="toc-backref" href="#id221">类变量</a><a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
<p><img alt="image10" src="http://images.dregs.top/images/20200301042337.png" /></p>
<ul>
<li><p>定义：写在类的下一级和方法同一级。</p></li>
<li><p>访问：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">类</span><span class="o">.</span><span class="n">类变量名称</span>
<span class="n">对象</span><span class="o">.</span><span class="n">类变量名称</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><p>总结：找变量优先找自己，自己没有找 类 或
基类；修改或赋值只能在自己的内部设置。</p>
</div></blockquote>
<p><img alt="image11" src="http://images.dregs.top/images/20200301042849.png" /></p>
</div>
</div>
<div class="section" id="id89">
<h2><a class="toc-backref" href="#id222"><span class="section-number">7.5. </span>方法</a><a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id90">
<h3><a class="toc-backref" href="#id223">绑定方法/普通方法</a><a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>定义：至少有一个self参数</p></li>
<li><p>执行：先创建对象，由对象.方法</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 普通方法 第一个方法是没有使用self，比较浪费内存</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># 绑定方法 使用到了self，所以是有意义的</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="mi">123</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id91">
<h3><a class="toc-backref" href="#id224">静态方法</a><a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>定义：</p>
<ul>
<li><p>&#64;staticmethod装饰器</p></li>
<li><p>参数无限制</p></li>
</ul>
</li>
<li><p>执行：</p>
<ul>
<li><p>类.静态方法名 ()</p></li>
<li><p>对象.静态方法() (不推荐)</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="mi">123</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">f1</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">Foo</span><span class="o">.</span><span class="n">f1</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">f1</span><span class="p">()</span> <span class="c1"># 不推荐</span>
</pre></div>
</div>
</div>
<div class="section" id="id92">
<h3><a class="toc-backref" href="#id225">类方法</a><a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>定义：</p>
<ul>
<li><p>&#64;classmethod装饰器</p></li>
<li><p>至少有cls参数，当前类。</p></li>
</ul>
</li>
<li><p>执行：</p>
<ul>
<li><p>类.类方法()</p></li>
<li><p>对象.类方法() （不推荐）</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="mi">123</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cls是当前类&#39;</span><span class="p">,</span><span class="bp">cls</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">Foo</span><span class="o">.</span><span class="n">f2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id93">
<h2><a class="toc-backref" href="#id226"><span class="section-number">7.6. </span>嵌套</a><a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>函数：参数可以是任意类型。</p></li>
<li><p>字典：对象和类都可以做字典的key和value</p></li>
<li><p>继承的查找关系</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">StarkConfig</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">AdminSite</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">arg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

<span class="n">site</span> <span class="o">=</span> <span class="n">AdminSite</span><span class="p">()</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">StarkConfig</span><span class="p">()</span>
<span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">StarkConfig</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

<span class="k">class</span> <span class="nc">AdminSite</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sk</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">set_sk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">arg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sk</span> <span class="o">=</span> <span class="n">arg</span>


<span class="n">site</span> <span class="o">=</span> <span class="n">AdminSite</span><span class="p">()</span> <span class="c1"># data_list = []  sk = StarkConfig</span>
<span class="n">site</span><span class="o">.</span><span class="n">set_sk</span><span class="p">(</span><span class="n">StarkConfig</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">sk</span><span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">StackConfig</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">AdminSite</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">arg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>

<span class="n">site</span> <span class="o">=</span> <span class="n">AdminSite</span><span class="p">()</span>
<span class="n">site</span><span class="o">.</span><span class="n">registry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">StackConfig</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">registry</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">StackConfig</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">registry</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="n">StackConfig</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">registry</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="n">Foo</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">registry</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="n">Base</span><span class="p">)</span>

<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">site</span><span class="o">.</span><span class="n">_register</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">()</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id94">
<h2><a class="toc-backref" href="#id227"><span class="section-number">7.7. </span>特殊成员</a><a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h2>
<div class="section" id="init">
<h3><a class="toc-backref" href="#id228"><code class="docutils literal notranslate"><span class="pre">__init__</span></code></a><a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 初始化方法</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">al</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a1</span> <span class="o">=</span> <span class="n">a1</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="new">
<h3><a class="toc-backref" href="#id229"><code class="docutils literal notranslate"><span class="pre">__new__</span></code></a><a class="headerlink" href="#new" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        用于给对象中赋值，初始化方法</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">123</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        用于创建空对象，构造方法，在__init__之前执行</span>
<span class="sd">        :param args:</span>
<span class="sd">        :param kwargs:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="cal">
<h3><a class="toc-backref" href="#id230"><code class="docutils literal notranslate"><span class="pre">__cal__</span></code></a><a class="headerlink" href="#cal" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;执行call方法&#39;</span><span class="p">)</span>

<span class="c1"># obj = Foo()</span>
<span class="c1"># obj()</span>
<span class="n">Foo</span><span class="p">()()</span>
</pre></div>
</div>
</div>
<div class="section" id="getitem-setitem-delitem">
<h3><a class="toc-backref" href="#id231"><code class="docutils literal notranslate"><span class="pre">__getitem__</span>&#160;&#160; <span class="pre">__setitem__</span> <span class="pre">__delitem__</span></code></a><a class="headerlink" href="#getitem-setitem-delitem" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span> <span class="o">+</span> <span class="s1">&#39;uuu&#39;</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="n">obj1</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj1</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">123</span>  <span class="c1"># 内部会自动调用 __setitem__方法</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">obj1</span><span class="p">[</span><span class="s1">&#39;xxx&#39;</span><span class="p">]</span>  <span class="c1"># 内部会自动调用 __getitem__方法</span>
<span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="k">del</span> <span class="n">obj1</span><span class="p">[</span><span class="s1">&#39;ttt&#39;</span><span class="p">]</span>  <span class="c1"># 内部会自动调用 __delitem__ 方法</span>
</pre></div>
</div>
</div>
<div class="section" id="id95">
<h3><a class="toc-backref" href="#id232"><code class="docutils literal notranslate"><span class="pre">__str__</span></code></a><a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        只有在打印对象时，会自动化调用此方法，并将其返回值在页面显示出来</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;asdfasudfasdfsad&#39;</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">email</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">email</span><span class="p">,)</span>
<span class="n">user_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">User</span><span class="p">(</span><span class="s1">&#39;二狗&#39;</span><span class="p">,</span><span class="s1">&#39;2g@qq.com&#39;</span><span class="p">),</span><span class="n">User</span><span class="p">(</span><span class="s1">&#39;二蛋&#39;</span><span class="p">,</span><span class="s1">&#39;2d@qq.com&#39;</span><span class="p">),</span><span class="n">User</span><span class="p">(</span><span class="s1">&#39;狗蛋&#39;</span><span class="p">,</span><span class="s1">&#39;xx@qq.com&#39;</span><span class="p">)]</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">user_list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="dict">
<h3><a class="toc-backref" href="#id233"><code class="docutils literal notranslate"><span class="pre">__dict__</span></code></a><a class="headerlink" href="#dict" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">email</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="s1">&#39;xxxx@qq.com&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span> <span class="c1"># 去对象中找到所有变量并将其转换为字典</span>
<span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id96">
<h3><a class="toc-backref" href="#id234">上下文管理</a><a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;内部执行&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Context</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;进入&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Foo</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;推出&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Context</span><span class="p">()</span> <span class="k">as</span> <span class="n">ctx</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;内部执行&#39;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id97">
<h3><a class="toc-backref" href="#id235">对象相加</a><a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__add__</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">def__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">13</span>
<span class="n">obj1</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj2</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">val</span>  <span class="o">=</span> <span class="n">obj1</span> <span class="o">+</span> <span class="n">obj2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id98">
<h2><a class="toc-backref" href="#id236"><span class="section-number">7.8. </span>内置函数补充</a><a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>type 判断对象是否是类的实例</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>

<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">==</span> <span class="n">Foo</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;obj是Foo类的对象&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>issubclass 判断派生类和基类的从属关系</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Base</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Base1</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">Base1</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Bar</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">Bar</span><span class="p">,</span><span class="n">Base</span><span class="p">))</span>  <span class="c1">#如果是，则返回True,否则返回False</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">Foo</span><span class="p">,</span><span class="n">Base</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><p>isinstance 判断对象是否是类或基类的实例</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">Foo</span><span class="p">))</span>  <span class="c1"># 判断obj是否是Foo类或其基类的实例（对象）</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">Base</span><span class="p">))</span> <span class="c1"># 判断obj是否是Foo类或其基类的实例（对象）</span>
</pre></div>
</div>
<ul class="simple">
<li><p>super
按照self对象所属类的继承关系，按照顺序挨个找func方法并执行（只找第一个）</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="c1"># Base -&gt; object</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;base.func&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bar.func&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">Base</span><span class="p">,</span><span class="n">Bar</span><span class="p">):</span> <span class="c1"># Foo -&gt; Base -&gt; Bar</span>
    <span class="k">pass</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id99">
<h2><a class="toc-backref" href="#id237"><span class="section-number">7.9. </span>可迭代对象</a><a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>只要能被for循环，内部就有iter方法</p></li>
<li><p>在类中实现<code class="docutils literal notranslate"><span class="pre">__iter__</span></code>方法且返回一个迭代器（或者是生成器）</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>    <span class="c1">#生成器是特殊的迭代器</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="mi">1</span>
        <span class="k">yield</span> <span class="mi">2</span>
        <span class="o">...</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id100">
<h2><a class="toc-backref" href="#id238"><span class="section-number">7.10. </span>约束</a><a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>寻找方便：在源代码或者别人写的代码中加入代码，根据查看基类代码，要在子类中都要添加此send</p></li>
<li><p>别人也方便：从上往下看，可以看到基类中存在raise中的约束，也方便掌握代码结构</p></li>
<li><p>更加规范：代码不会轻易出BUG</p></li>
<li><p><strong>没有也可以，只要不调用这个send也不会出错，只是为了规范，同上。</strong></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">base</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;子类中必须有方法&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">base</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;我是真的&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Fooo</span><span class="p">(</span><span class="n">base</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;我也是真的&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Foooo</span><span class="p">(</span><span class="n">base</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;我不知道发生了什么&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">Foooo</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">send</span><span class="p">()</span>    <span class="c1">#报错 NotImplementedError 提醒</span>
</pre></div>
</div>
</div>
<div class="section" id="id101">
<h2><a class="toc-backref" href="#id239"><span class="section-number">7.11. </span>反射</a><a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>实现了根据输入的字符查找元素并操作</p></li>
<li><p>根据字符串形式去操作对象中的元素</p></li>
<li><p>getattr(对象,“字符串”) 根据字符粗的形式去某个对象中 获取 对象的成员。</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">)</span>

<span class="c1"># 获取变量</span>
<span class="n">v1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="c1"># 获取方法</span>
<span class="n">method_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;login&#39;</span><span class="p">)</span>
<span class="n">method_name</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>getattr 中的第三个值是如果获取不到的返回值</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;post&#39;</span><span class="p">):</span>
    <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>

<span class="n">v1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;get&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># 推荐</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>hasattr(对象,‘字符串’) 根据字符粗的形式去某个对象中判断是否有该成员。</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">wsgiref.simple_server</span> <span class="kn">import</span> <span class="n">make_server</span>

<span class="k">class</span> <span class="nc">View</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;登陆&#39;</span>

    <span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;等处&#39;</span>

    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;首页&#39;</span>


<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span><span class="n">start_response</span><span class="p">):</span>
    <span class="n">start_response</span><span class="p">(</span><span class="s2">&quot;200 OK&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain; charset=utf-8&#39;</span><span class="p">)])</span>
    <span class="c1">#</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">View</span><span class="p">()</span>
    <span class="c1"># 获取用户输入的URL</span>
    <span class="n">method_name</span> <span class="o">=</span> <span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PATH_INFO&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">method_name</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;sdf&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),]</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">method_name</span><span class="p">)()</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">response</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>  <span class="p">]</span>

<span class="c1"># 作用：写一个网站，用户只要来方法，就自动找到第三个参数并执行。</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">make_server</span><span class="p">(</span><span class="s1">&#39;192.168.12.87&#39;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>setattr(对象,‘变量’,‘值’) 根据字符粗的形式去某个对象中设置成员。</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">k1</span> <span class="o">=</span> <span class="mi">999</span>
<span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span><span class="mi">123</span><span class="p">)</span> <span class="c1"># obj.k1 = 123</span>

<span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">k1</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>delattr(对象,‘变量’) 根据字符粗的形式去某个对象中删除成员。</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">k1</span> <span class="o">=</span> <span class="mi">999</span>
<span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;k1&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">k1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id102">
<h2><a class="toc-backref" href="#id240"><span class="section-number">7.12. </span>单例模式</a><a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>无论实例化多少次，永远用的都是第一次实例化出的对象。优点是可以增加效率，防止链接太多导致的崩溃</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Singleton</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instance</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instance</span>
<span class="c1">#当运行第一次，创建new的对象，赋值给类变量instance,之后在使用这个类，对象相同</span>
<span class="n">obj1</span> <span class="o">=</span> <span class="n">Singleton</span><span class="p">()</span>
<span class="n">obj2</span> <span class="o">=</span> <span class="n">Singleton</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id103">
<h2><a class="toc-backref" href="#id241"><span class="section-number">7.13. </span>文件的连接池</a><a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FileHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_object</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instance</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instance</span>

<span class="n">obj1</span> <span class="o">=</span> <span class="n">FileHelper</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">obj2</span> <span class="o">=</span> <span class="n">FileHelper</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="c1"># 无论打开多少次都是同一个链接</span>
</pre></div>
</div>
</div>
<div class="section" id="id104">
<h2><a class="toc-backref" href="#id242"><span class="section-number">7.14. </span>反射当前文件的变量</a><a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">],</span><span class="s1">&#39;变量名&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id105">
<h1><a class="toc-backref" href="#id243"><span class="section-number">8. </span>第八章 网络编程</a><a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h1>
<p>TCP协议</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># server.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">sk</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">sk</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="mi">9000</span><span class="p">))</span>
<span class="n">sk</span><span class="o">.</span><span class="n">listen</span><span class="p">()</span>

<span class="n">conn</span><span class="p">,</span><span class="n">addr</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>  <span class="c1"># 等待连接,阻塞状态</span>
<span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>      <span class="c1"># 发送信息，必须是字节类型</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>    <span class="c1"># 接收1024 字节</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>             <span class="c1"># 关闭连接</span>
<span class="n">sk</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>               <span class="c1"># 关闭整个socket</span>

<span class="c1"># client.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">sk</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">sk</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="mi">9000</span><span class="p">))</span>

<span class="n">msg</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">sk</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;nihao&#39;</span><span class="p">)</span>

<span class="n">sk</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>通信循环</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># client.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">sk</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">sk</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="mi">9000</span><span class="p">))</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">inp</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;请输入内容：&#39;</span><span class="p">)</span>
    <span class="n">sk</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">sk</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># server.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">sk</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">sk</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="mi">9000</span><span class="p">))</span>
<span class="n">sk</span><span class="o">.</span><span class="n">listen</span><span class="p">()</span>
<span class="n">conn</span><span class="p">,</span><span class="n">addr</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>  <span class="c1"># 等待连接</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>    <span class="c1"># 接收1024 字节</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>             <span class="c1"># 关闭连接</span>
<span class="n">sk</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>               <span class="c1"># 关闭整个socket</span>
</pre></div>
</div>
<p>链接循环</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># client.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">sk</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">sk</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span> <span class="p">,</span><span class="mi">9000</span><span class="p">))</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">inp</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;请输入命令：&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">inp</span><span class="p">:</span><span class="k">continue</span>                     <span class="c1"># 解决发送为空</span>
    <span class="n">sk</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">sk</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># server.py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">sk</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">sk</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="mi">9000</span><span class="p">))</span>
<span class="n">sk</span><span class="o">.</span><span class="n">listen</span><span class="p">()</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">conn</span><span class="p">,</span><span class="n">addr</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>  <span class="c1"># 等待连接</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>    <span class="c1"># 接收1024 字节</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">msg</span><span class="p">:</span><span class="k">break</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ConnectionResetError</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>             <span class="c1"># 关闭连接</span>
<span class="n">sk</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>               <span class="c1"># 关闭整个socket</span>
</pre></div>
</div>
<p>基于udp协议的套接字</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">sk</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">sk</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="mi">9000</span><span class="p">))</span>
<span class="n">sk</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># 设置为非阻塞</span>
<span class="n">sk</span><span class="o">.</span><span class="n">listen</span><span class="p">()</span>

<span class="n">conn</span><span class="p">,</span><span class="n">addr</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>  <span class="c1"># 等待连接,阻塞状态</span>
<span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>      <span class="c1"># 发送信息，必须是字节类型</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>    <span class="c1"># 接收1024 字节</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>             <span class="c1"># 关闭连接</span>
<span class="n">sk</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>               <span class="c1"># 关闭整个socket#!/usr/bin/env python</span>
<span class="c1"># -*- coding:utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">sk</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">sk</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="mi">9000</span><span class="p">))</span>
<span class="n">sk</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># 设置为非阻塞</span>
<span class="n">sk</span><span class="o">.</span><span class="n">listen</span><span class="p">()</span>

<span class="n">conn</span><span class="p">,</span><span class="n">addr</span> <span class="o">=</span> <span class="n">sk</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>  <span class="c1"># 等待连接,阻塞状态</span>
<span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>      <span class="c1"># 发送信息，必须是字节类型</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>    <span class="c1"># 接收1024 字节</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>             <span class="c1"># 关闭连接</span>
<span class="n">sk</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>               <span class="c1"># 关闭整个socket</span>
</pre></div>
</div>
<p>非阻塞io模型</p>
<p>验证客户端合法性</p>
<p>socketserver模块</p>
</div>
<div class="section" id="id106">
<h1><a class="toc-backref" href="#id244"><span class="section-number">9. </span>第九章 并发编程</a><a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="id107">
<h1><a class="toc-backref" href="#id245"><span class="section-number">10. </span>第十章 数据库</a><a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sql">
<h2><a class="toc-backref" href="#id246"><span class="section-number">10.1. </span>初识sql语句</a><a class="headerlink" href="#sql" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#进入mysql客户端</span>
<span class="n">mysql</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">user</span><span class="p">();</span>  <span class="c1">#查看当前用户</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">exit</span>     <span class="c1"># 也可以用\q quit退出</span>

<span class="c1"># 默认用户登陆之后并没有实际操作的权限</span>
<span class="c1"># 需要使用管理员root用户登陆</span>
<span class="n">mysql</span> <span class="o">-</span><span class="n">uroot</span> <span class="o">-</span><span class="n">p</span>   <span class="c1"># mysql5.6默认是没有密码的</span>
<span class="c1">#遇到password直接按回车键</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="nb">set</span> <span class="n">password</span> <span class="o">=</span> <span class="n">password</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">);</span> <span class="c1"># 给当前数据库设置密码</span>

<span class="c1"># 创建账号</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">create</span> <span class="n">user</span> <span class="s1">&#39;eva&#39;</span><span class="o">@</span><span class="s1">&#39;192.168.10.%&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">BY</span> <span class="s1">&#39;123&#39;</span><span class="p">;</span><span class="c1"># 指示网段</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">create</span> <span class="n">user</span> <span class="s1">&#39;eva&#39;</span><span class="o">@</span><span class="s1">&#39;192.168.10.5&#39;</span><span class="p">;</span>   <span class="c1"># 指示某机器可以连接</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">create</span> <span class="n">user</span> <span class="s1">&#39;eva&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span>                   <span class="c1">#指示所有机器都可以连接</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">grants</span> <span class="k">for</span> <span class="s1">&#39;eva&#39;</span><span class="o">@</span><span class="s1">&#39;192.168.10.5&#39;</span><span class="p">;</span><span class="n">查看某个用户的权限</span>
<span class="c1"># 远程登陆</span>
<span class="n">mysql</span> <span class="o">-</span><span class="n">uroot</span> <span class="o">-</span><span class="n">p123</span> <span class="o">-</span><span class="n">h</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">10.3</span>

<span class="c1"># 给账号授权</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">grant</span> <span class="nb">all</span> <span class="n">on</span> <span class="o">*.*</span> <span class="n">to</span> <span class="s1">&#39;eva&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">flush</span> <span class="n">privileges</span><span class="p">;</span>    <span class="c1"># 刷新使授权立即生效</span>

<span class="c1"># 创建账号并授权</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">grant</span> <span class="nb">all</span> <span class="n">on</span> <span class="o">*.*</span> <span class="n">to</span> <span class="s1">&#39;eva&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="n">identified</span> <span class="n">by</span> <span class="s1">&#39;123&#39;</span><span class="p">;</span>

<span class="c1"># 查看配置项</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">variables</span> <span class="n">like</span> <span class="s1">&#39;</span><span class="si">%e</span><span class="s1">ngine%&#39;</span><span class="p">;</span>

<span class="c1"># 查看表结构</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">desc</span> <span class="n">t1</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">describe</span> <span class="n">t1</span><span class="p">;</span> <span class="c1"># 只能查看表的字段信息，基础信息</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">create</span> <span class="n">table</span> <span class="n">t1</span><span class="p">;</span> <span class="c1"># 能够看到和这张表相关的所有信息</span>
</pre></div>
</div>
<p>1、DDL语句 数据库定义语言： 数据库、表、视图、索引、存储过程，例如CREATE
DROP ALTER</p>
<p>2、DML语句 数据库操纵语言：
插入数据INSERT、删除数据DELETE、更新数据UPDATE、查询数据SELECT</p>
<p>3、DCL语句 数据库控制语言： 例如控制用户的访问权限GRANT、REVOKE</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 操作文件夹（库）
   增：create database db1 charset utf8;
   查：show databases;
   改：alter database db1 charset latin1;
   删除: drop database db1;


# 操作文件（表）
   先切换到文件夹下：use db1
   增：create table t1(id int,name char);
   查：show tables;
   改：alter table t1 modify name char(3);
      alter table t1 change name name1 char(2);
   删：drop table t1;


# 操作文件中的内容（记录）
   增：insert into t1 values(1,&#39;egon1&#39;),(2,&#39;egon2&#39;),(3,&#39;egon3&#39;);
   查：select * from t1;
   改：update t1 set name=&#39;sb&#39; where id=2;
   删：delete from t1 where id=1;

# 清空表：
       delete from t1; #如果有自增id，新增的数据，仍然是以删除前的最后一样作为起始。
       truncate table t1;数据量大，删除速度比上一条快，且直接从零开始，

*auto_increment 表示：自增
*primary key 表示：约束（不能重复且不能为空）；加速查找
</pre></div>
</div>
</div>
<div class="section" id="mysql">
<h2><a class="toc-backref" href="#id247"><span class="section-number">10.2. </span>MySQL的表的操作</a><a class="headerlink" href="#mysql" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 创建库</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">create</span> <span class="n">database</span> <span class="n">staff</span> <span class="n">charset</span><span class="o">=</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
<span class="c1"># 创建表</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">create</span> <span class="n">table</span> <span class="n">staff_info</span> <span class="p">(</span><span class="nb">id</span> <span class="nb">int</span><span class="p">,</span><span class="n">name</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span><span class="n">age</span> <span class="nb">int</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">sex</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">),</span><span class="n">phone</span> <span class="n">bigint</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span><span class="n">job</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">11</span><span class="p">));</span>
<span class="c1"># 查看表</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">tables</span><span class="p">;</span>
</pre></div>
</div>
<div class="section" id="id108">
<h3><a class="toc-backref" href="#id248">10.2.1 表的约束</a><a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h3>
<div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span># 约束
    not null 某一个字段不能为空
    default 给某一个字段设置默认值
    unique 设置某一个字段不能重复
    auto_increment 设置某一个int类型的字段，自增
    primary key 设置某一个字段非空且不能重复
    foreign key 外键
</pre></div>
</div>
<div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span><span class="c1"># not null</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="k">create</span> <span class="k">table</span> <span class="nf">t12</span> <span class="p">(</span><span class="n">id</span> <span class="kt">int</span> <span class="k">not</span> <span class="no">null</span><span class="p">);</span>
<span class="c1">#不能向id列插入空元素。</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="k">insert</span> <span class="k">into</span> <span class="n">t12</span> <span class="k">values</span> <span class="p">(</span><span class="no">null</span><span class="p">);</span>
<span class="n">ERROR</span> <span class="mi">1048</span> <span class="p">(</span><span class="mi">23000</span><span class="p">):</span> <span class="k">Column</span> <span class="s1">&#39;id&#39;</span> <span class="n">cannot</span> <span class="n">be</span> <span class="no">null</span>

<span class="c1"># default</span>


<span class="c1"># unique</span>
<span class="k">create</span> <span class="k">table</span> <span class="nf">t3</span><span class="p">(</span>
    <span class="n">id</span> <span class="kt">int</span> <span class="k">unique</span><span class="p">,</span>
    <span class="n">username</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">unique</span><span class="p">,</span>
    <span class="n">password</span> <span class="kt">char</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1"># 联合唯一</span>
<span class="k">create</span> <span class="k">table</span> <span class="nf">t4</span><span class="p">(</span>
    <span class="n">id</span> <span class="kt">int</span><span class="p">,</span>
    <span class="n">ip</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">server</span> <span class="kt">char</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">port</span> <span class="kt">int</span><span class="p">,</span>
    <span class="k">unique</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span><span class="n">port</span><span class="p">)</span>
<span class="p">);</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="k">show</span> <span class="k">create</span> <span class="k">table</span> <span class="n">t4</span><span class="p">;</span>

<span class="c1"># 自增，自增字段必须是数字，且必须是唯一的</span>
<span class="k">create</span> <span class="k">table</span> <span class="nf">t3</span><span class="p">(</span>
    <span class="n">id</span> <span class="kt">int</span> <span class="k">unique</span> <span class="kp">auto_increment</span><span class="p">,</span>
    <span class="n">username</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">unique</span><span class="p">,</span>
    <span class="n">password</span> <span class="kt">char</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1"># primary key，一张表只能设置一个主键</span>
<span class="k">create</span> <span class="k">table</span> <span class="nf">t6</span><span class="p">(</span>
    <span class="n">id</span> <span class="kt">int</span> <span class="k">not</span> <span class="no">null</span> <span class="k">unique</span><span class="p">,</span> <span class="c1"># 你指定的第一个非空且唯一的字段会被定义为主键</span>
    <span class="n">name</span> <span class="kt">char</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span> <span class="k">unique</span>
<span class="p">);</span>

<span class="c1"># 联合主键</span>
<span class="k">create</span> <span class="k">table</span> <span class="nf">t4</span><span class="p">(</span>
    <span class="n">id</span> <span class="kt">int</span><span class="p">,</span>
    <span class="n">ip</span> <span class="kt">char</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">server</span> <span class="kt">char</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">port</span> <span class="kt">int</span><span class="p">,</span>
    <span class="k">primary</span> <span class="k">key</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span><span class="n">port</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1"># foreign key</span>
<span class="k">create</span> <span class="k">table</span> <span class="nf">staff</span><span class="p">(</span>
    <span class="n">id</span> <span class="kt">int</span> <span class="k">primary</span> <span class="k">key</span> <span class="kp">auto_increment</span><span class="p">,</span>
    <span class="n">age</span> <span class="kt">int</span><span class="p">,</span>
    <span class="n">gender</span> <span class="kt">enum</span><span class="p">(</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">)</span>
    <span class="n">salary</span> <span class="kt">float</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">hire_date</span> <span class="kt">date</span><span class="p">,</span>
    <span class="n">post_id</span> <span class="kt">int</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id109">
<h3><a class="toc-backref" href="#id249">修改表</a><a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alter</span> <span class="n">table</span> <span class="n">表名</span> <span class="n">add</span> <span class="n">添加字段</span>
<span class="n">alter</span> <span class="n">table</span> <span class="n">表名</span> <span class="n">drop</span> <span class="n">删除字段</span>
<span class="n">alter</span> <span class="n">table</span> <span class="n">表名</span> <span class="n">modify</span> <span class="n">修改已经存在的字段</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id110">
<h2><a class="toc-backref" href="#id250"><span class="section-number">10.3. </span>单表查询</a><a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">DISTINCT</span> <span class="n">字段1</span><span class="p">,</span><span class="n">字段2</span><span class="o">...</span> <span class="n">FROM</span> <span class="n">表名</span>
                              <span class="n">WHERE</span> <span class="n">条件</span>
                              <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">field</span>
                              <span class="n">HAVING</span> <span class="n">筛选</span>
                              <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">field</span>
                              <span class="n">LIMIT</span> <span class="n">限制条数</span>
</pre></div>
</div>
<div class="section" id="where">
<h3><a class="toc-backref" href="#id251">where约束</a><a class="headerlink" href="#where" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 测试数据准备</span>
<span class="n">create</span> <span class="n">table</span> <span class="n">employee</span><span class="p">(</span>
<span class="nb">id</span> <span class="nb">int</span> <span class="ow">not</span> <span class="n">null</span> <span class="n">unique</span> <span class="n">auto_increment</span><span class="p">,</span>
<span class="n">emp_name</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="ow">not</span> <span class="n">null</span><span class="p">,</span>
<span class="n">sex</span> <span class="n">enum</span><span class="p">(</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">)</span> <span class="ow">not</span> <span class="n">null</span> <span class="n">default</span> <span class="s1">&#39;male&#39;</span><span class="p">,</span> <span class="c1">#大部分是男的</span>
<span class="n">age</span> <span class="nb">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="n">unsigned</span> <span class="ow">not</span> <span class="n">null</span> <span class="n">default</span> <span class="mi">28</span><span class="p">,</span>
<span class="n">hire_date</span> <span class="n">date</span> <span class="ow">not</span> <span class="n">null</span><span class="p">,</span>
<span class="n">post</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="n">post_comment</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="n">salary</span> <span class="n">double</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="n">office</span> <span class="nb">int</span><span class="p">,</span> <span class="c1">#一个部门一个屋子</span>
<span class="n">depart_id</span> <span class="nb">int</span>
<span class="p">);</span>

<span class="c1">#三个部门：教学，销售，运营</span>
<span class="n">insert</span> <span class="n">into</span> <span class="n">employee</span><span class="p">(</span><span class="n">emp_name</span><span class="p">,</span><span class="n">sex</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">hire_date</span><span class="p">,</span><span class="n">post</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="n">office</span><span class="p">,</span><span class="n">depart_id</span><span class="p">)</span> <span class="n">values</span>
<span class="p">(</span><span class="s1">&#39;egon&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;20170301&#39;</span><span class="p">,</span><span class="s1">&#39;老男孩驻沙河办事处外交大使&#39;</span><span class="p">,</span><span class="mf">7300.33</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="c1">#以下是教学部</span>
<span class="p">(</span><span class="s1">&#39;alex&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="s1">&#39;20150302&#39;</span><span class="p">,</span><span class="s1">&#39;teacher&#39;</span><span class="p">,</span><span class="mf">1000000.31</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;wupeiqi&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="s1">&#39;20130305&#39;</span><span class="p">,</span><span class="s1">&#39;teacher&#39;</span><span class="p">,</span><span class="mi">8300</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;yuanhao&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">73</span><span class="p">,</span><span class="s1">&#39;20140701&#39;</span><span class="p">,</span><span class="s1">&#39;teacher&#39;</span><span class="p">,</span><span class="mi">3500</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;liwenzhou&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="s1">&#39;20121101&#39;</span><span class="p">,</span><span class="s1">&#39;teacher&#39;</span><span class="p">,</span><span class="mi">2100</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;jingliyang&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;20110211&#39;</span><span class="p">,</span><span class="s1">&#39;teacher&#39;</span><span class="p">,</span><span class="mi">9000</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;jinxin&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;19000301&#39;</span><span class="p">,</span><span class="s1">&#39;teacher&#39;</span><span class="p">,</span><span class="mi">30000</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;成龙&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="s1">&#39;20101111&#39;</span><span class="p">,</span><span class="s1">&#39;teacher&#39;</span><span class="p">,</span><span class="mi">10000</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>

<span class="p">(</span><span class="s1">&#39;歪歪&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="s1">&#39;20150311&#39;</span><span class="p">,</span><span class="s1">&#39;sale&#39;</span><span class="p">,</span><span class="mf">3000.13</span><span class="p">,</span><span class="mi">402</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="c1">#以下是销售部门</span>
<span class="p">(</span><span class="s1">&#39;丫丫&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="s1">&#39;20101101&#39;</span><span class="p">,</span><span class="s1">&#39;sale&#39;</span><span class="p">,</span><span class="mf">2000.35</span><span class="p">,</span><span class="mi">402</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;丁丁&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;20110312&#39;</span><span class="p">,</span><span class="s1">&#39;sale&#39;</span><span class="p">,</span><span class="mf">1000.37</span><span class="p">,</span><span class="mi">402</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;星星&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;20160513&#39;</span><span class="p">,</span><span class="s1">&#39;sale&#39;</span><span class="p">,</span><span class="mf">3000.29</span><span class="p">,</span><span class="mi">402</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;格格&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="s1">&#39;20170127&#39;</span><span class="p">,</span><span class="s1">&#39;sale&#39;</span><span class="p">,</span><span class="mf">4000.33</span><span class="p">,</span><span class="mi">402</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>

<span class="p">(</span><span class="s1">&#39;张野&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="s1">&#39;20160311&#39;</span><span class="p">,</span><span class="s1">&#39;operation&#39;</span><span class="p">,</span><span class="mf">10000.13</span><span class="p">,</span><span class="mi">403</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="c1">#以下是运营部门</span>
<span class="p">(</span><span class="s1">&#39;程咬金&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;19970312&#39;</span><span class="p">,</span><span class="s1">&#39;operation&#39;</span><span class="p">,</span><span class="mi">20000</span><span class="p">,</span><span class="mi">403</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;程咬银&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;20130311&#39;</span><span class="p">,</span><span class="s1">&#39;operation&#39;</span><span class="p">,</span><span class="mi">19000</span><span class="p">,</span><span class="mi">403</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;程咬铜&#39;</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;20150411&#39;</span><span class="p">,</span><span class="s1">&#39;operation&#39;</span><span class="p">,</span><span class="mi">18000</span><span class="p">,</span><span class="mi">403</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;程咬铁&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;20140512&#39;</span><span class="p">,</span><span class="s1">&#39;operation&#39;</span><span class="p">,</span><span class="mi">17000</span><span class="p">,</span><span class="mi">403</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id111">
<span id="id112"></span><h3><a class="toc-backref" href="#id252">比较运算 &gt; &lt; = &gt;= &lt;= !=</a><a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 查询薪资大于1000的人</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">salary</span> <span class="o">&gt;</span> <span class="mi">10000</span><span class="p">;</span>
<span class="c1"># 查询薪资小于10000的人</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">salary</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">;</span>
<span class="c1"># 薪资是30000或者薪资是20000的人</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">salary</span><span class="o">=</span><span class="mi">30000</span> <span class="ow">or</span> <span class="n">salary</span><span class="o">=</span><span class="mi">20000</span><span class="p">;</span>
<span class="c1"># 性别为女并且年龄为18岁的人</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">sex</span><span class="o">=</span><span class="s1">&#39;female&#39;</span> <span class="ow">and</span> <span class="n">age</span><span class="o">=</span><span class="mi">18</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="id113">
<h3><a class="toc-backref" href="#id253">范围筛选</a><a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span><span class="n">多选一</span>
<span class="c1"># 查找薪资为20000,30000,3000,19000的人</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">salary</span> <span class="ow">in</span><span class="p">(</span><span class="mi">20000</span><span class="p">,</span><span class="mi">30000</span><span class="p">,</span><span class="mi">3000</span><span class="p">,</span><span class="mi">1900</span><span class="p">);</span>
<span class="c1"># 查找薪资不在20000,30000,3000,19000的人</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">salary</span> <span class="ow">not</span> <span class="ow">in</span><span class="p">(</span><span class="mi">20000</span><span class="p">,</span><span class="mi">30000</span><span class="p">,</span><span class="mi">3000</span><span class="p">,</span><span class="mi">1900</span><span class="p">);</span>
<span class="c1"># 查找薪资为20000,30000,3000,19000的人的名字和职业</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">emp_name</span><span class="p">,</span><span class="n">post</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">salary</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">20000</span><span class="p">,</span><span class="mi">30000</span><span class="p">,</span><span class="mi">3000</span><span class="p">,</span><span class="mi">1900</span><span class="p">);</span>

<span class="mf">2.</span><span class="n">在一个模糊的范围里</span>
<span class="c1"># 在一个数值区间1w-2w之间的所有人的名字</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">emp_name</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">salary</span> <span class="n">between</span> <span class="mi">10000</span> <span class="ow">and</span> <span class="mi">20000</span><span class="p">;</span>

<span class="mf">3.</span><span class="n">字符串的模糊查询</span>
<span class="c1"># 找一个名字是以程字开头的(%为通配符，匹配任意长度的任意内容)</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">emp_name</span> <span class="n">like</span> <span class="s1">&#39;程__&#39;</span><span class="p">;</span>
<span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">emp_name</span> <span class="n">like</span> <span class="s1">&#39;程__&#39;</span><span class="p">;</span>  <span class="c1"># _代表一个字符，也是一个通配符，匹配一个字符长度的任意内容</span>
<span class="c1"># 查找以n结尾的所有人的名字</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">emp_name</span> <span class="n">like</span> <span class="s1">&#39;%n&#39;</span><span class="p">;</span>
<span class="c1"># 查找名字里面含有n的</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">emp_name</span> <span class="n">like</span> <span class="s1">&#39;%n%&#39;</span><span class="p">;</span>

<span class="mf">4.</span><span class="n">正则匹配</span>
<span class="c1"># 查找以j开头后面为5个字母的名字</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">where</span> <span class="n">emp_name</span> <span class="n">regexp</span> <span class="s1">&#39;^j[a-z]</span><span class="si">{5}</span><span class="s1">&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="group-by">
<h3><a class="toc-backref" href="#id254">分组 group by</a><a class="headerlink" href="#group-by" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">group</span> <span class="n">by</span> <span class="n">post</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="id114">
<h3><a class="toc-backref" href="#id255">聚合</a><a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># count 统计</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">count</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">employee</span><span class="p">;</span>
<span class="c1"># ave 平均值</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">employee</span><span class="p">;</span>
<span class="c1"># sum 统计这个字段对应的数值的和</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="nb">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">employee</span><span class="p">;</span>
<span class="c1"># max 最大值</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">emp_name</span><span class="p">,</span><span class="nb">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">employee</span><span class="p">;</span> <span class="c1"># 名字对应不上金额，显示的是以分组为代价</span>
<span class="c1"># min 最小值</span>
</pre></div>
</div>
</div>
<div class="section" id="id115">
<h3><a class="toc-backref" href="#id256">分组聚合</a><a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 求各个部门的人数</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">post</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">group</span> <span class="n">by</span> <span class="n">post</span><span class="p">;</span>
<span class="c1"># 求公司里男生和女生的人数</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">count</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">group</span> <span class="n">by</span> <span class="n">sex</span><span class="p">;</span>
<span class="c1"># 各部门的平均薪资</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">post</span><span class="p">,</span><span class="n">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="kn">from</span>  <span class="nn">employee</span> <span class="n">group</span> <span class="n">by</span> <span class="n">post</span><span class="p">;</span>
</pre></div>
</div>
<p>注意：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>在 my.cnf 里面设置:
[mysqld]
sql_mode=’STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION’
</pre></div>
</div>
</div>
<div class="section" id="having">
<h3><a class="toc-backref" href="#id257">having</a><a class="headerlink" href="#having" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 过滤组，总是与group by一起</span>
<span class="c1"># 部门人数大于3的部门</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">post</span>  <span class="kn">from</span> <span class="nn">employee</span> <span class="n">group</span> <span class="n">by</span> <span class="n">post</span> <span class="n">having</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">;</span>
<span class="c1"># 部门平均薪资大于10000的部门</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">post</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">group</span> <span class="n">by</span> <span class="n">post</span> <span class="n">having</span> <span class="n">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">10000</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="order-by">
<h3><a class="toc-backref" href="#id258">order by</a><a class="headerlink" href="#order-by" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 薪资从大到小排序</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">order</span> <span class="n">by</span> <span class="n">salary</span> <span class="n">desc</span><span class="p">;</span>
<span class="c1"># 入职时间从小到大排序</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">order</span> <span class="n">by</span> <span class="n">hire_date</span><span class="p">;</span>
<span class="c1"># 年龄相同的情况下，按薪资排序</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">order</span> <span class="n">by</span> <span class="n">age</span><span class="p">,</span><span class="n">salary</span> <span class="n">desc</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="limit">
<h3><a class="toc-backref" href="#id259">limit</a><a class="headerlink" href="#limit" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 取薪资最高前三名</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">employee</span> <span class="n">order</span> <span class="n">by</span> <span class="n">age</span><span class="p">,</span><span class="n">salary</span> <span class="n">desc</span> <span class="n">limit</span> <span class="mi">3</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="pymysql">
<h3><a class="toc-backref" href="#id260">pymysql操作数据库</a><a class="headerlink" href="#pymysql" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pymysql</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;192.168.56.30&#39;</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;root&#39;</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="s2">&quot;123&quot;</span><span class="p">,</span><span class="n">database</span><span class="o">=</span><span class="s1">&#39;blsnt&#39;</span><span class="p">)</span>

<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">pymysql</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span><span class="p">)</span> <span class="c1"># 游标,字典格式显示,默认元祖</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;select * from employee where id &gt; 10&#39;</span><span class="p">)</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id116">
<h2><a class="toc-backref" href="#id261"><span class="section-number">10.4. </span>多表查询</a><a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id117">
<h3><a class="toc-backref" href="#id262">连表查询</a><a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>#建表
create table department(
id int,
name varchar(20)
);

create table emp(
id int primary key auto_increment,
name varchar(20),
sex enum(&#39;male&#39;,&#39;female&#39;) not null default &#39;male&#39;,
age int,
dep_id int
);

#插入数据
insert into department values
(200,&#39;技术&#39;),
(201,&#39;人力资源&#39;),
(202,&#39;销售&#39;),
(203,&#39;运营&#39;);

insert into emp(name,sex,age,dep_id) values
(&#39;egon&#39;,&#39;male&#39;,18,200),
(&#39;alex&#39;,&#39;female&#39;,48,201),
(&#39;wupeiqi&#39;,&#39;male&#39;,38,201),
(&#39;yuanhao&#39;,&#39;female&#39;,28,202),
(&#39;liwenzhou&#39;,&#39;male&#39;,18,200),
(&#39;jingliyang&#39;,&#39;female&#39;,18,204)
;
# 查看表结构
mysql&gt; desc department;
mysql&gt; desc employee;

1.交叉连接：不适用任何匹配条件。生成笛卡尔积
mysql&gt; select * from employee,department;
+----+------------+--------+------+--------+------+--------------+
| id | name       | sex    | age  | dep_id | id   | name         |
+----+------------+--------+------+--------+------+--------------+
|  1 | egon       | male   |   18 |    200 |  200 | 技术         |
|  1 | egon       | male   |   18 |    200 |  201 | 人力资源     |
|  1 | egon       | male   |   18 |    200 |  202 | 销售         |
|  1 | egon       | male   |   18 |    200 |  203 | 运营         |
|  2 | alex       | female |   48 |    201 |  200 | 技术         |
|  2 | alex       | female |   48 |    201 |  201 | 人力资源     |
|  2 | alex       | female |   48 |    201 |  202 | 销售         |
|  2 | alex       | female |   48 |    201 |  203 | 运营         |
|  3 | wupeiqi    | male   |   38 |    201 |  200 | 技术         |
|  3 | wupeiqi    | male   |   38 |    201 |  201 | 人力资源     |
|  3 | wupeiqi    | male   |   38 |    201 |  202 | 销售         |
|  3 | wupeiqi    | male   |   38 |    201 |  203 | 运营         |
|  4 | yuanhao    | female |   28 |    202 |  200 | 技术         |
|  4 | yuanhao    | female |   28 |    202 |  201 | 人力资源     |
|  4 | yuanhao    | female |   28 |    202 |  202 | 销售         |
|  4 | yuanhao    | female |   28 |    202 |  203 | 运营         |
|  5 | liwenzhou  | male   |   18 |    200 |  200 | 技术         |
|  5 | liwenzhou  | male   |   18 |    200 |  201 | 人力资源     |
|  5 | liwenzhou  | male   |   18 |    200 |  202 | 销售         |
|  5 | liwenzhou  | male   |   18 |    200 |  203 | 运营         |
|  6 | jingliyang | female |   18 |    204 |  200 | 技术         |
|  6 | jingliyang | female |   18 |    204 |  201 | 人力资源     |
|  6 | jingliyang | female |   18 |    204 |  202 | 销售         |
|  6 | jingliyang | female |   18 |    204 |  203 | 运营         |
+----+------------+--------+------+--------+------+--------------+

2.内连接：只连接匹配的行
#找两张表共有的部分，相当于利用条件从笛卡尔积结果中筛选出了正确的结果
#department没有204这个部门，因而emp表中关于204这条员工信息没有匹配出来
mysql&gt; select * from emp inner join department on emp.dep_id = department.id;
+----+-----------+--------+------+--------+------+--------------+
| id | name      | sex    | age  | dep_id | id   | name         |
+----+-----------+--------+------+--------+------+--------------+
|  1 | egon      | male   |   18 |    200 |  200 | 技术         |
|  2 | alex      | female |   48 |    201 |  201 | 人力资源     |
|  3 | wupeiqi   | male   |   38 |    201 |  201 | 人力资源     |
|  4 | yuanhao   | female |   28 |    202 |  202 | 销售         |
|  5 | liwenzhou | male   |   18 |    200 |  200 | 技术         |
+----+-----------+--------+------+--------+------+--------------+

3.外链接之左连接：优先显示左表全部记录
#以左表为准，即找出所有员工信息，当然包括没有部门的员工
#本质就是：在内连接的基础上增加左边有右边没有的结果
mysql&gt; select * from emp left join department on emp.dep_id = department.id;
+----+------------+--------+------+--------+------+--------------+
| id | name       | sex    | age  | dep_id | id   | name         |
+----+------------+--------+------+--------+------+--------------+
|  1 | egon       | male   |   18 |    200 |  200 | 技术         |
|  5 | liwenzhou  | male   |   18 |    200 |  200 | 技术         |
|  2 | alex       | female |   48 |    201 |  201 | 人力资源     |
|  3 | wupeiqi    | male   |   38 |    201 |  201 | 人力资源     |
|  4 | yuanhao    | female |   28 |    202 |  202 | 销售         |
|  6 | jingliyang | female |   18 |    204 | NULL | NULL         |
+----+------------+--------+------+--------+------+--------------+

4.外链接之右连接：优先显示右表全部记录
mysql&gt; select * from emp right join department on emp.dep_id = department.id;
+------+-----------+--------+------+--------+------+--------------+
| id   | name      | sex    | age  | dep_id | id   | name         |
+------+-----------+--------+------+--------+------+--------------+
|    1 | egon      | male   |   18 |    200 |  200 | 技术         |
|    2 | alex      | female |   48 |    201 |  201 | 人力资源     |
|    3 | wupeiqi   | male   |   38 |    201 |  201 | 人力资源     |
|    4 | yuanhao   | female |   28 |    202 |  202 | 销售         |
|    5 | liwenzhou | male   |   18 |    200 |  200 | 技术         |
| NULL | NULL      | NULL   | NULL |   NULL |  203 | 运营         |
+------+-----------+--------+------+--------+------+--------------+

5.全外连接：显示左右两个表全部记录
#全外连接：在内连接的基础上增加左边有右边没有的和右边有左边没有的结果
#注意：mysql不支持全外连接 full JOIN
#强调：mysql可以使用此种方式间接实现全外连接
mysql&gt; select * from emp left join department on emp.dep_id = department.id
union
select * from emp right join department on emp.dep_id = department.id
;
+------+------------+--------+------+--------+------+--------------+
| id   | name       | sex    | age  | dep_id | id   | name         |
+------+------------+--------+------+--------+------+--------------+
|    1 | egon       | male   |   18 |    200 |  200 | 技术         |
|    5 | liwenzhou  | male   |   18 |    200 |  200 | 技术         |
|    2 | alex       | female |   48 |    201 |  201 | 人力资源     |
|    3 | wupeiqi    | male   |   38 |    201 |  201 | 人力资源     |
|    4 | yuanhao    | female |   28 |    202 |  202 | 销售         |
|    6 | jingliyang | female |   18 |    204 | NULL | NULL         |
| NULL | NULL       | NULL   | NULL |   NULL |  203 | 运营         |
+------+------------+--------+------+--------+------+--------------+

# 查找技术部人的名字
mysql&gt; select emp.name from emp inner join department on emp.dep_id = department.id where department.name=&#39;技术&#39;;
mysql&gt; select emp.name from emp inner join department as dep on emp.dep_id = dep.id where dep.name=&#39;技术&#39;;
+-----------+
| name      |
+-----------+
| egon      |
| liwenzhou |
+-----------+
</pre></div>
</div>
</div>
<div class="section" id="id118">
<h3><a class="toc-backref" href="#id263">子查询</a><a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="section" id="id119">
<h1><a class="toc-backref" href="#id264"><span class="section-number">11. </span>第十一章 前端开发</a><a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="django">
<h1><a class="toc-backref" href="#id265"><span class="section-number">12. </span>第十二章 Django框架</a><a class="headerlink" href="#django" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="id120">
<h1><a class="toc-backref" href="#id266"><span class="section-number">13. </span>第十三章 爬虫</a><a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="cmdb">
<h1><a class="toc-backref" href="#id267"><span class="section-number">14. </span>第十四章 CMDB</a><a class="headerlink" href="#cmdb" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="id121">
<h1><a class="toc-backref" href="#id268"><span class="section-number">15. </span>附录 常见错误和单词</a><a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h1>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Linux/index.html" class="btn btn-neutral float-right" title="Linux基础" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Python编程" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, 小义同学

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>